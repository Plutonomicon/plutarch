<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Extra.Api</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-2"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Api.html#pgetContinuingOutputs"><span class="hs-identifier">pgetContinuingOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Api.html#pfindOwnInput"><span class="hs-identifier">pfindOwnInput</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Api.html#pparseDatum"><span class="hs-identifier">pparseDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutarch.Api.V1</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><span class="hs-identifier">PAddress</span></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><span class="hs-identifier">PDatum</span></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><span class="hs-identifier">PDatumHash</span></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><span class="hs-identifier">PTuple</span></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><span class="hs-identifier">PTxInInfo</span></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><span class="hs-identifier">PTxOut</span></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><span class="hs-identifier">PTxOutRef</span></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutarch.Prelude</span></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="annot"><span class="hs-comment">{- | Find the output txns corresponding to the input being validated.

  Takes as arguments the inputs, outputs and the spending transaction referenced
  from `PScriptPurpose`.

  __Example:__

  @
  ctx &lt;- tcont $ pletFields @[&quot;txInfo&quot;, &quot;purpose&quot;] sc
  pmatchC (getField @&quot;purpose&quot; ctx) &gt;&gt;= \case
    PSpending outRef' -&gt; do
      let outRef = pfield @&quot;_0&quot; # outRef'
          inputs = pfield @&quot;inputs&quot; # (getField @&quot;txInfo&quot; ctx)
          outputs = pfield @&quot;outputs&quot; # (getField @&quot;txInfo&quot; ctx)
      pure $ pgetContinuingOutputs # inputs # outputs # outRef
    _ -&gt;
      pure $ ptraceError &quot;not a spending tx&quot;
  @
-}</span></span><span>
</span><span id="line-37"></span><span id="local-6989586621679180607"><span class="annot"><a href="Plutarch.Extra.Api.html#pgetContinuingOutputs"><span class="hs-identifier hs-type">pgetContinuingOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180607"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxInInfo</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxOut</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxOutRef</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxOut</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-38"></span><span id="pgetContinuingOutputs"><span class="annot"><span class="annottext">pgetContinuingOutputs :: forall (s :: S).
Term
  s
  (PBuiltinList PTxInInfo
   :--&gt; (PBuiltinList PTxOut
         :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut)))
</span><a href="Plutarch.Extra.Api.html#pgetContinuingOutputs"><span class="hs-identifier hs-var hs-var">pgetContinuingOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s
   (PBuiltinList PTxInInfo
    :--&gt; (PBuiltinList PTxOut
          :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut))))
-&gt; Term
     s
     (PBuiltinList PTxInInfo
      :--&gt; (PBuiltinList PTxOut
            :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s
    (PBuiltinList PTxInInfo
     :--&gt; (PBuiltinList PTxOut
           :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut))))
 -&gt; Term
      s
      (PBuiltinList PTxInInfo
       :--&gt; (PBuiltinList PTxOut
             :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut))))
-&gt; (forall (s :: S).
    Term
      s
      (PBuiltinList PTxInInfo
       :--&gt; (PBuiltinList PTxOut
             :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut))))
-&gt; Term
     s
     (PBuiltinList PTxInInfo
      :--&gt; (PBuiltinList PTxOut
            :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinList PTxInInfo)
 -&gt; Term s (PBuiltinList PTxOut)
 -&gt; Term s PTxOutRef
 -&gt; Term s (PBuiltinList PTxOut))
-&gt; Term
     s
     (PBuiltinList PTxInInfo
      :--&gt; (PBuiltinList PTxOut
            :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PBuiltinList PTxOut)
 -&gt; Term s PTxOutRef
 -&gt; Term s (PBuiltinList PTxOut))
-&gt; Term
     s
     (c
      :--&gt; (PBuiltinList PTxOut
            :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList PTxInInfo)
  -&gt; Term s (PBuiltinList PTxOut)
  -&gt; Term s PTxOutRef
  -&gt; Term s (PBuiltinList PTxOut))
 -&gt; Term
      s
      (PBuiltinList PTxInInfo
       :--&gt; (PBuiltinList PTxOut
             :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut))))
-&gt; (Term s (PBuiltinList PTxInInfo)
    -&gt; Term s (PBuiltinList PTxOut)
    -&gt; Term s PTxOutRef
    -&gt; Term s (PBuiltinList PTxOut))
-&gt; Term
     s
     (PBuiltinList PTxInInfo
      :--&gt; (PBuiltinList PTxOut
            :--&gt; (PTxOutRef :--&gt; PBuiltinList PTxOut)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180822"><span class="annot"><span class="annottext">Term s (PBuiltinList PTxInInfo)
</span><a href="#local-6989586621679180822"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span id="local-6989586621679180823"><span class="annot"><span class="annottext">Term s (PBuiltinList PTxOut)
</span><a href="#local-6989586621679180823"><span class="hs-identifier hs-var">outputs</span></a></span></span><span> </span><span id="local-6989586621679180824"><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679180824"><span class="hs-identifier hs-var">outRef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe PTxInInfo)
-&gt; (PMaybe PTxInInfo s -&gt; Term s (PBuiltinList PTxOut))
-&gt; Term s (PBuiltinList PTxOut)
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
forall (s :: S).
Term
  s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
</span><a href="Plutarch.Extra.Api.html#pfindOwnInput"><span class="hs-identifier hs-var">pfindOwnInput</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
-&gt; Term s (PBuiltinList PTxInInfo)
-&gt; Term s (PTxOutRef :--&gt; PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PTxInInfo)
</span><a href="#local-6989586621679180822"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PTxOutRef :--&gt; PMaybe PTxInInfo)
-&gt; Term s PTxOutRef -&gt; Term s (PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679180824"><span class="hs-identifier hs-var">outRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe PTxInInfo s -&gt; Term s (PBuiltinList PTxOut))
 -&gt; Term s (PBuiltinList PTxOut))
-&gt; (PMaybe PTxInInfo s -&gt; Term s (PBuiltinList PTxOut))
-&gt; Term s (PBuiltinList PTxOut)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-41"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180828"><span class="annot"><span class="annottext">Term s PTxInInfo
</span><a href="#local-6989586621679180828"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-42"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180829"><span class="annot"><span class="annottext">resolved :: Term s (PAsData PTxOut)
</span><a href="#local-6989586621679180829"><span class="hs-identifier hs-var hs-var">resolved</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (b :: PType) (p :: PType) (s :: S)
       (a :: PType) (as :: [PLabeledType]) (n :: Nat).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><span class="hs-identifier hs-var">pfield</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;resolved&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTxInInfo :--&gt; PAsData PTxOut)
-&gt; Term s PTxInInfo -&gt; Term s (PAsData PTxOut)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PTxInInfo
</span><a href="#local-6989586621679180828"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-43"></span><span>            </span><span id="local-6989586621679180831"><span class="annot"><span class="annottext">outAddr :: Term s PAddress
</span><a href="#local-6989586621679180831"><span class="hs-identifier hs-var hs-var">outAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (b :: PType) (p :: PType) (s :: S)
       (a :: PType) (as :: [PLabeledType]) (n :: Nat).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><span class="hs-identifier hs-var">pfield</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;address&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PTxOut :--&gt; PAddress)
-&gt; Term s (PAsData PTxOut) -&gt; Term s PAddress
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PTxOut)
</span><a href="#local-6989586621679180829"><span class="hs-identifier hs-var">resolved</span></a></span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  ((PTxOut :--&gt; PBool)
   :--&gt; (PBuiltinList PTxOut :--&gt; PBuiltinList PTxOut))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s ((a :--&gt; PBool) :--&gt; (list a :--&gt; list a))
</span><span class="hs-identifier hs-var">pfilter</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PTxOut :--&gt; PBool)
   :--&gt; (PBuiltinList PTxOut :--&gt; PBuiltinList PTxOut))
-&gt; Term s (PTxOut :--&gt; PBool)
-&gt; Term s (PBuiltinList PTxOut :--&gt; PBuiltinList PTxOut)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
forall (s :: S). Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
</span><a href="#local-6989586621679180833"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
-&gt; Term s PAddress -&gt; Term s (PTxOut :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679180831"><span class="hs-identifier hs-var">outAddr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PTxOut :--&gt; PBuiltinList PTxOut)
-&gt; Term s (PBuiltinList PTxOut) -&gt; Term s (PBuiltinList PTxOut)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PTxOut)
</span><a href="#local-6989586621679180823"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-45"></span><span>      </span><span class="annot"><span class="annottext">PMaybe PTxInInfo s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><span class="annottext">Term s PString -&gt; Term s (PBuiltinList PTxOut)
forall (s :: S) (a :: PType). Term s PString -&gt; Term s a
</span><span class="hs-identifier hs-var">ptraceError</span></span><span> </span><span class="annot"><span class="annottext">Term s PString
</span><span class="hs-string">&quot;can't get any continuing outputs&quot;</span></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-48"></span><span>    </span><span id="local-6989586621679180682"><span class="annot"><a href="#local-6989586621679180833"><span class="hs-identifier hs-type">matches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180682"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAddress</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxOut</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-49"></span><span>    </span><span id="local-6989586621679180833"><span class="annot"><span class="annottext">matches :: forall (s :: S). Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
</span><a href="#local-6989586621679180833"><span class="hs-identifier hs-var hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S). Term s (PAddress :--&gt; (PTxOut :--&gt; PBool)))
-&gt; Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S). Term s (PAddress :--&gt; (PTxOut :--&gt; PBool)))
 -&gt; Term s (PAddress :--&gt; (PTxOut :--&gt; PBool)))
-&gt; (forall (s :: S). Term s (PAddress :--&gt; (PTxOut :--&gt; PBool)))
-&gt; Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-50"></span><span>      </span><span class="annot"><span class="annottext">(Term s PAddress -&gt; Term s PTxOut -&gt; Term s PBool)
-&gt; Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s PTxOut -&gt; Term s PBool)
-&gt; Term s (c :--&gt; (PTxOut :--&gt; PBool))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s PAddress -&gt; Term s PTxOut -&gt; Term s PBool)
 -&gt; Term s (PAddress :--&gt; (PTxOut :--&gt; PBool)))
-&gt; (Term s PAddress -&gt; Term s PTxOut -&gt; Term s PBool)
-&gt; Term s (PAddress :--&gt; (PTxOut :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180858"><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679180858"><span class="hs-identifier hs-var">adr</span></a></span></span><span> </span><span id="local-6989586621679180859"><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><span class="annottext">Term s PAddress
</span><a href="#local-6989586621679180858"><span class="hs-identifier hs-var">adr</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PAddress -&gt; Term s PAddress -&gt; Term s PBool
forall (s :: S). Term s PAddress -&gt; Term s PAddress -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#==</span></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (b :: PType) (p :: PType) (s :: S)
       (a :: PType) (as :: [PLabeledType]) (n :: Nat).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><span class="hs-identifier hs-var">pfield</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;address&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTxOut :--&gt; PAddress) -&gt; Term s PTxOut -&gt; Term s PAddress
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PTxOut
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">txOut</span></a></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="annot"><span class="hs-comment">{- | Find the input being spent in the current transaction.

  Takes as arguments the inputs, as well as the spending transaction referenced from `PScriptPurpose`.

  __Example:__

  @
  ctx &lt;- tcont $ pletFields @[&quot;txInfo&quot;, &quot;purpose&quot;] sc
  pmatchC (getField @&quot;purpose&quot; ctx) &gt;&gt;= \case
    PSpending outRef' -&gt; do
      let outRef = pfield @&quot;_0&quot; # outRef'
          inputs = pfield @&quot;inputs&quot; # (getField @&quot;txInfo&quot; ctx)
      pure $ pfindOwnInput # inputs # outRef
    _ -&gt;
      pure $ ptraceError &quot;not a spending tx&quot;
  @
-}</span></span><span>
</span><span id="line-70"></span><span id="local-6989586621679180667"><span class="annot"><a href="Plutarch.Extra.Api.html#pfindOwnInput"><span class="hs-identifier hs-type">pfindOwnInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180667"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxInInfo</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxOutRef</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMaybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxInInfo</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-71"></span><span id="pfindOwnInput"><span class="annot"><span class="annottext">pfindOwnInput :: forall (s :: S).
Term
  s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
</span><a href="Plutarch.Extra.Api.html#pfindOwnInput"><span class="hs-identifier hs-var hs-var">pfindOwnInput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S).
 Term
   s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo)))
-&gt; Term
     s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S).
  Term
    s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo)))
 -&gt; Term
      s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo)))
-&gt; (forall (s :: S).
    Term
      s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo)))
-&gt; Term
     s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinList PTxInInfo)
 -&gt; Term s PTxOutRef -&gt; Term s (PMaybe PTxInInfo))
-&gt; Term
     s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s PTxOutRef -&gt; Term s (PMaybe PTxInInfo))
-&gt; Term s (c :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinList PTxInInfo)
  -&gt; Term s PTxOutRef -&gt; Term s (PMaybe PTxInInfo))
 -&gt; Term
      s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo)))
-&gt; (Term s (PBuiltinList PTxInInfo)
    -&gt; Term s PTxOutRef -&gt; Term s (PMaybe PTxInInfo))
-&gt; Term
     s (PBuiltinList PTxInInfo :--&gt; (PTxOutRef :--&gt; PMaybe PTxInInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180880"><span class="annot"><span class="annottext">Term s (PBuiltinList PTxInInfo)
</span><a href="#local-6989586621679180880"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span id="local-6989586621679180881"><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679180881"><span class="hs-identifier hs-var">outRef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><span class="annottext">Term
  s
  ((PTxInInfo :--&gt; PBool)
   :--&gt; (PBuiltinList PTxInInfo :--&gt; PMaybe PTxInInfo))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; PBool) :--&gt; (l a :--&gt; PMaybe a))
</span><span class="hs-identifier hs-var">pfind</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PTxInInfo :--&gt; PBool)
   :--&gt; (PBuiltinList PTxInInfo :--&gt; PMaybe PTxInInfo))
-&gt; Term s (PTxInInfo :--&gt; PBool)
-&gt; Term s (PBuiltinList PTxInInfo :--&gt; PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
forall (s :: S). Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
</span><a href="#local-6989586621679180883"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
-&gt; Term s PTxOutRef -&gt; Term s (PTxInInfo :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679180881"><span class="hs-identifier hs-var">outRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PTxInInfo :--&gt; PMaybe PTxInInfo)
-&gt; Term s (PBuiltinList PTxInInfo) -&gt; Term s (PMaybe PTxInInfo)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList PTxInInfo)
</span><a href="#local-6989586621679180880"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-75"></span><span>    </span><span id="local-6989586621679180695"><span class="annot"><a href="#local-6989586621679180883"><span class="hs-identifier hs-type">matches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180695"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PTxOutRef</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTxInInfo</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-76"></span><span>    </span><span id="local-6989586621679180883"><span class="annot"><span class="annottext">matches :: forall (s :: S). Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
</span><a href="#local-6989586621679180883"><span class="hs-identifier hs-var hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s :: S). Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool)))
-&gt; Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">((forall (s :: S). Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool)))
 -&gt; Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool)))
-&gt; (forall (s :: S).
    Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool)))
-&gt; Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-77"></span><span>      </span><span class="annot"><span class="annottext">(Term s PTxOutRef -&gt; Term s PTxInInfo -&gt; Term s PBool)
-&gt; Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s PTxInInfo -&gt; Term s PBool)
-&gt; Term s (c :--&gt; (PTxInInfo :--&gt; PBool))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s PTxOutRef -&gt; Term s PTxInInfo -&gt; Term s PBool)
 -&gt; Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool)))
-&gt; (Term s PTxOutRef -&gt; Term s PTxInInfo -&gt; Term s PBool)
-&gt; Term s (PTxOutRef :--&gt; (PTxInInfo :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180907"><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679180907"><span class="hs-identifier hs-var">outref</span></a></span></span><span> </span><span id="local-6989586621679180908"><span class="annot"><span class="annottext">Term s PTxInInfo
</span><a href="#local-6989586621679180908"><span class="hs-identifier hs-var">txininfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><span class="annottext">Term s PTxOutRef
</span><a href="#local-6989586621679180907"><span class="hs-identifier hs-var">outref</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PTxOutRef -&gt; Term s PTxOutRef -&gt; Term s PBool
forall (s :: S).
Term s PTxOutRef -&gt; Term s PTxOutRef -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#==</span></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (b :: PType) (p :: PType) (s :: S)
       (a :: PType) (as :: [PLabeledType]) (n :: Nat).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><span class="hs-identifier hs-var">pfield</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;outRef&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTxInInfo :--&gt; PTxOutRef)
-&gt; Term s PTxInInfo -&gt; Term s PTxOutRef
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PTxInInfo
</span><a href="#local-6989586621679180908"><span class="hs-identifier hs-var">txininfo</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><span class="hs-comment">{- | Lookup up the datum given the datum hash.

  Takes as argument the datum assoc list from a `PTxInfo`. Validates the datum
  using `PTryFrom`.

  __Example:__

  @
  pparseDatum @MyType # datumHash #$ pfield @&quot;datums&quot; # txinfo
  @
-}</span></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Plutarch.Extra.Api.html#pparseDatum"><span class="hs-identifier hs-type">pparseDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679180699"><span class="annot"><a href="#local-6989586621679180699"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679180701"><span class="annot"><a href="#local-6989586621679180701"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTryFrom</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180699"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180701"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PDatumHash</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PTuple</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PDatumHash</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PDatum</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180699"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span id="pparseDatum"><span class="annot"><span class="annottext">pparseDatum :: forall (a :: PType) (s :: S).
PTryFrom PData (PAsData a) =&gt;
Term
  s
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe (PAsData a)))
</span><a href="Plutarch.Extra.Api.html#pparseDatum"><span class="hs-identifier hs-var hs-var">pparseDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PDatumHash
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe (PAsData a)))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe (PAsData a)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PDatumHash
    :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
          :--&gt; PMaybe (PAsData a)))
 -&gt; Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe (PAsData a))))
-&gt; ClosedTerm
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe (PAsData a)))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe (PAsData a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><span class="annottext">(Term s PDatumHash
 -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
 -&gt; Term s (PMaybe (PAsData a)))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe (PAsData a)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
 -&gt; Term s (PMaybe (PAsData a)))
-&gt; Term
     s
     (c
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe (PAsData a)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s PDatumHash
  -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
  -&gt; Term s (PMaybe (PAsData a)))
 -&gt; Term
      s
      (PDatumHash
       :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
             :--&gt; PMaybe (PAsData a))))
-&gt; (Term s PDatumHash
    -&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
    -&gt; Term s (PMaybe (PAsData a)))
-&gt; Term
     s
     (PDatumHash
      :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
            :--&gt; PMaybe (PAsData a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180937"><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679180937"><span class="hs-identifier hs-var">dh</span></a></span></span><span> </span><span id="local-6989586621679180938"><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679180938"><span class="hs-identifier hs-var">datums</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMaybe (PAsData (PTuple PDatumHash PDatum)))
-&gt; (PMaybe (PAsData (PTuple PDatumHash PDatum)) s
    -&gt; Term s (PMaybe (PAsData a)))
-&gt; Term s (PMaybe (PAsData a))
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  ((PAsData (PTuple PDatumHash PDatum) :--&gt; PBool)
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe (PAsData (PTuple PDatumHash PDatum))))
forall (l :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike l a =&gt;
Term s ((a :--&gt; PBool) :--&gt; (l a :--&gt; PMaybe a))
</span><span class="hs-identifier hs-var">pfind</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((PAsData (PTuple PDatumHash PDatum) :--&gt; PBool)
   :--&gt; (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
         :--&gt; PMaybe (PAsData (PTuple PDatumHash PDatum))))
-&gt; Term s (PAsData (PTuple PDatumHash PDatum) :--&gt; PBool)
-&gt; Term
     s
     (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
      :--&gt; PMaybe (PAsData (PTuple PDatumHash PDatum)))
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s (PDatumHash :--&gt; (PAsData (PTuple PDatumHash PDatum) :--&gt; PBool))
forall (k :: PType) (v :: PType) (s :: S).
(PEq k, PIsData k) =&gt;
Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
</span><a href="#local-6989586621679180939"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PDatumHash :--&gt; (PAsData (PTuple PDatumHash PDatum) :--&gt; PBool))
-&gt; Term s PDatumHash
-&gt; Term s (PAsData (PTuple PDatumHash PDatum) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s PDatumHash
</span><a href="#local-6989586621679180937"><span class="hs-identifier hs-var">dh</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PAsData (PTuple PDatumHash PDatum))
   :--&gt; PMaybe (PAsData (PTuple PDatumHash PDatum)))
-&gt; Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
-&gt; Term s (PMaybe (PAsData (PTuple PDatumHash PDatum)))
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PAsData (PTuple PDatumHash PDatum)))
</span><a href="#local-6989586621679180938"><span class="hs-identifier hs-var">datums</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe (PAsData (PTuple PDatumHash PDatum)) s
  -&gt; Term s (PMaybe (PAsData a)))
 -&gt; Term s (PMaybe (PAsData a)))
-&gt; (PMaybe (PAsData (PTuple PDatumHash PDatum)) s
    -&gt; Term s (PMaybe (PAsData a)))
-&gt; Term s (PMaybe (PAsData a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><span class="annottext">PMaybe (PAsData (PTuple PDatumHash PDatum)) s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><span class="annottext">PMaybe (PAsData a) s -&gt; Term s (PMaybe (PAsData a))
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PMaybe (PAsData a) s
forall (a :: PType) (s :: S). PMaybe a s
</span><span class="hs-identifier hs-var">PNothing</span></span><span>
</span><span id="line-97"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180941"><span class="annot"><span class="annottext">Term s (PAsData (PTuple PDatumHash PDatum))
</span><a href="#local-6989586621679180941"><span class="hs-identifier hs-var">datumTuple</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679180942"><span class="hs-identifier hs-type">datum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PData</span></span><span>
</span><span id="line-99"></span><span>            </span><span id="local-6989586621679180942"><span class="annot"><span class="annottext">datum :: Term s PData
</span><a href="#local-6989586621679180942"><span class="hs-identifier hs-var hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s PDatum -&gt; Term s (PInner PDatum)
forall (s :: S) (a :: PType). Term s a -&gt; Term s (PInner a)
</span><span class="hs-identifier hs-var">pto</span></span><span> </span><span class="annot"><span class="annottext">(Term s PDatum -&gt; Term s (PInner PDatum))
-&gt; Term s PDatum -&gt; Term s (PInner PDatum)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData PDatum) -&gt; Term s PDatum
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><span class="hs-identifier hs-var">pfromData</span></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData PDatum) -&gt; Term s PDatum)
-&gt; Term s (PAsData PDatum) -&gt; Term s PDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (b :: PType) (p :: PType) (s :: S)
       (a :: PType) (as :: [PLabeledType]) (n :: Nat).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><span class="hs-identifier hs-var">pfield</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_1&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PTuple PDatumHash PDatum :--&gt; PAsData PDatum)
-&gt; Term s (PTuple PDatumHash PDatum) -&gt; Term s (PAsData PDatum)
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple PDatumHash PDatum))
-&gt; Term s (PTuple PDatumHash PDatum)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><span class="hs-identifier hs-var">pfromData</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple PDatumHash PDatum))
</span><a href="#local-6989586621679180941"><span class="hs-identifier hs-var">datumTuple</span></a></span><span>
</span><span id="line-100"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">PMaybe (PAsData a) s -&gt; Term s (PMaybe (PAsData a))
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">(PMaybe (PAsData a) s -&gt; Term s (PMaybe (PAsData a)))
-&gt; PMaybe (PAsData a) s -&gt; Term s (PMaybe (PAsData a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData a) -&gt; PMaybe (PAsData a) s
forall (a :: PType) (s :: S). Term s a -&gt; PMaybe a s
</span><span class="hs-identifier hs-var">PJust</span></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData a) -&gt; PMaybe (PAsData a) s)
-&gt; Term s (PAsData a) -&gt; PMaybe (PAsData a) s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData -&gt; Term s (PAsData a)
forall (a :: PType) (s :: S).
PTryFrom PData (PAsData a) =&gt;
Term s PData -&gt; Term s (PAsData a)
</span><a href="Plutarch.Extra.Api.html#ptryFromData"><span class="hs-identifier hs-var">ptryFromData</span></a></span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679180942"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="#local-6989586621679180939"><span class="hs-identifier hs-type">matches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679180710"><span class="annot"><a href="#local-6989586621679180710"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679180712"><span class="annot"><a href="#local-6989586621679180712"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679180711"><span class="annot"><a href="#local-6989586621679180711"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PEq</span></span><span> </span><span class="annot"><a href="#local-6989586621679180710"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180710"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180711"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180710"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PTuple</span></span><span> </span><span class="annot"><a href="#local-6989586621679180710"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180712"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>    </span><span id="local-6989586621679180939"><span class="annot"><span class="annottext">matches :: forall (k :: PType) (v :: PType) (s :: S).
(PEq k, PIsData k) =&gt;
Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
</span><a href="#local-6989586621679180939"><span class="hs-identifier hs-var hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
-&gt; Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
 -&gt; Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool)))
-&gt; ClosedTerm (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
-&gt; Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-104"></span><span>      </span><span class="annot"><span class="annottext">(Term s k -&gt; Term s (PAsData (PTuple k v)) -&gt; Term s PBool)
-&gt; Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s (PAsData (PTuple k v)) -&gt; Term s PBool)
-&gt; Term s (c :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s k -&gt; Term s (PAsData (PTuple k v)) -&gt; Term s PBool)
 -&gt; Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool)))
-&gt; (Term s k -&gt; Term s (PAsData (PTuple k v)) -&gt; Term s PBool)
-&gt; Term s (k :--&gt; (PAsData (PTuple k v) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180986"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180986"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679180987"><span class="annot"><span class="annottext">Term s (PAsData (PTuple k v))
</span><a href="#local-6989586621679180987"><span class="hs-identifier hs-var">ab</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180986"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (s :: S). Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#==</span></span><span> </span><span class="annot"><span class="annottext">forall (name :: Symbol) (b :: PType) (p :: PType) (s :: S)
       (a :: PType) (as :: [PLabeledType]) (n :: Nat).
(PDataFields p,
 (as :: [PLabeledType]) ~ (PFields p :: [PLabeledType]),
 (n :: Nat) ~ (PLabelIndex name as :: Nat), KnownNat n,
 (a :: PType) ~ (PUnLabel (IndexList @PLabeledType n as) :: PType),
 PFromDataable a b) =&gt;
Term s (p :--&gt; b)
</span><span class="hs-identifier hs-var">pfield</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;_0&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple k v) :--&gt; k)
-&gt; Term s (PAsData (PTuple k v)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData (PTuple k v))
</span><a href="#local-6989586621679180987"><span class="hs-identifier hs-var">ab</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="annot"><a href="Plutarch.Extra.Api.html#ptryFromData"><span class="hs-identifier hs-type">ptryFromData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679180725"><span class="annot"><a href="#local-6989586621679180725"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679180726"><span class="annot"><a href="#local-6989586621679180726"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PTryFrom</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180725"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180726"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PData</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180726"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180725"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span id="ptryFromData"><span class="annot"><span class="annottext">ptryFromData :: forall (a :: PType) (s :: S).
PTryFrom PData (PAsData a) =&gt;
Term s PData -&gt; Term s (PAsData a)
</span><a href="Plutarch.Extra.Api.html#ptryFromData"><span class="hs-identifier hs-var hs-var">ptryFromData</span></a></span></span><span> </span><span id="local-6989586621679180992"><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679180992"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermCont @(PAsData a) s (Term s (PAsData a)) -&gt; Term s (PAsData a)
forall (a :: PType) (s :: S). TermCont @a s (Term s a) -&gt; Term s a
</span><span class="hs-identifier hs-var">unTermCont</span></span><span> </span><span class="annot"><span class="annottext">(TermCont @(PAsData a) s (Term s (PAsData a))
 -&gt; Term s (PAsData a))
-&gt; TermCont @(PAsData a) s (Term s (PAsData a))
-&gt; Term s (PAsData a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData a),
 GReduce
   (PTryFromExcess PData (PAsData a) s)
   (Rep (PTryFromExcess PData (PAsData a) s)))
-&gt; Term s (PAsData a)
forall a b. (a, b) -&gt; a
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((Term s (PAsData a),
  GReduce
    (PTryFromExcess PData (PAsData a) s)
    (Rep (PTryFromExcess PData (PAsData a) s)))
 -&gt; Term s (PAsData a))
-&gt; TermCont
     @(PAsData a)
     s
     (Term s (PAsData a),
      GReduce
        (PTryFromExcess PData (PAsData a) s)
        (Rep (PTryFromExcess PData (PAsData a) s)))
-&gt; TermCont @(PAsData a) s (Term s (PAsData a))
forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(((Term s (PAsData a),
   GReduce
     (PTryFromExcess PData (PAsData a) s)
     (Rep (PTryFromExcess PData (PAsData a) s)))
  -&gt; Term s (PAsData a))
 -&gt; Term s (PAsData a))
-&gt; TermCont
     @(PAsData a)
     s
     (Term s (PAsData a),
      GReduce
        (PTryFromExcess PData (PAsData a) s)
        (Rep (PTryFromExcess PData (PAsData a) s)))
forall a (s :: S) (r :: PType).
((a -&gt; Term s r) -&gt; Term s r) -&gt; TermCont @r s a
</span><span class="hs-identifier hs-var">tcont</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (b :: PType) (a :: PType) (s :: S) (r :: PType).
PTryFrom a b =&gt;
Term s a
-&gt; ((Term s b, Reduce (PTryFromExcess a b s)) -&gt; Term s r)
-&gt; Term s r
</span><span class="hs-identifier hs-var">ptryFrom</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180725"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s PData
</span><a href="#local-6989586621679180992"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span></pre></body></html>
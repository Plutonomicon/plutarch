<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Extra.Map</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-4"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Lookup</span></span><span>
</span><span id="line-5"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#ptryLookup"><span class="hs-identifier">ptryLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Comparisons</span></span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pkeysEqual"><span class="hs-identifier">pkeysEqual</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pkeysEqualUnsorted"><span class="hs-identifier">pkeysEqualUnsorted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Modification</span></span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pupdate"><span class="hs-identifier">pupdate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#padjust"><span class="hs-identifier">padjust</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pmapWithKey"><span class="hs-identifier">pmapWithKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Folds</span></span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pfoldMapWithKey"><span class="hs-identifier">pfoldMapWithKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pfoldlWithKey"><span class="hs-identifier">pfoldlWithKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Conversion</span></span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pkeys"><span class="hs-identifier">pkeys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Key-value pair manipulation</span></span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier">pkvPairKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pkvPairValue"><span class="hs-identifier">pkvPairValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Plutarch.Extra.Map.html#pkvPairLt"><span class="hs-identifier">pkvPairLt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutarch.Api.V1.AssocMap</span></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><span class="hs-identifier">KeyGuarantees</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Sorted</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Unsorted</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><span class="hs-identifier">PMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">PMap</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><span class="hs-identifier">plookup</span></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutarch.Builtin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ppairDataBuiltin</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Extra.Maybe.html"><span class="hs-identifier">Plutarch.Extra.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Extra.Maybe.html#passertPJust"><span class="hs-identifier">passertPJust</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Plutarch.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PList</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutarch.Prelude</span></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="annot"><span class="hs-comment">{- | Like regular 'fmap' but it provides key of each element that is being
     modified.
-}</span></span><span>
</span><span id="line-42"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pmapWithKey"><span class="hs-identifier hs-type">pmapWithKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180101"><span class="annot"><a href="#local-6989586621679180101"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180103"><span class="annot"><a href="#local-6989586621679180103"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180104"><span class="annot"><a href="#local-6989586621679180104"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180107"><span class="annot"><a href="#local-6989586621679180107"><span class="hs-identifier hs-type">keysort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyGuarantees</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180105"><span class="annot"><a href="#local-6989586621679180105"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180101"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180103"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180104"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180105"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180101"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180104"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679180107"><span class="hs-identifier hs-type">keysort</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180101"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180101"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180104"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span id="pmapWithKey"><span class="annot"><span class="annottext">pmapWithKey :: forall (k :: PType) (a :: PType) (b :: PType)
       (keysort :: KeyGuarantees) (s :: S).
(PIsData k, PIsData a, PIsData b) =&gt;
Term
  s
  ((k :--&gt; (a :--&gt; b))
   :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
</span><a href="Plutarch.Extra.Map.html#pmapWithKey"><span class="hs-identifier hs-var hs-var">pmapWithKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((k :--&gt; (a :--&gt; b))
   :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
-&gt; Term
     s
     ((k :--&gt; (a :--&gt; b))
      :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((k :--&gt; (a :--&gt; b))
    :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
 -&gt; Term
      s
      ((k :--&gt; (a :--&gt; b))
       :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b)))
-&gt; ClosedTerm
     ((k :--&gt; (a :--&gt; b))
      :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
-&gt; Term
     s
     ((k :--&gt; (a :--&gt; b))
      :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="annottext">(Term s (k :--&gt; (a :--&gt; b))
 -&gt; Term s (PMap keysort k a) -&gt; Term s (PMap 'Unsorted k b))
-&gt; Term
     s
     ((k :--&gt; (a :--&gt; b))
      :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PMap keysort k a) -&gt; Term s (PMap 'Unsorted k b))
-&gt; Term s (c :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (k :--&gt; (a :--&gt; b))
  -&gt; Term s (PMap keysort k a) -&gt; Term s (PMap 'Unsorted k b))
 -&gt; Term
      s
      ((k :--&gt; (a :--&gt; b))
       :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b)))
-&gt; (Term s (k :--&gt; (a :--&gt; b))
    -&gt; Term s (PMap keysort k a) -&gt; Term s (PMap 'Unsorted k b))
-&gt; Term
     s
     ((k :--&gt; (a :--&gt; b))
      :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180392"><span class="annot"><span class="annottext">Term s (k :--&gt; (a :--&gt; b))
</span><a href="#local-6989586621679180392"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679180393"><span class="annot"><span class="annottext">Term s (PMap keysort k a)
</span><a href="#local-6989586621679180393"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMap keysort k a)
-&gt; (PMap keysort k a s -&gt; Term s (PMap 'Unsorted k b))
-&gt; Term s (PMap 'Unsorted k b)
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keysort k a)
</span><a href="#local-6989586621679180393"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap keysort k a s -&gt; Term s (PMap 'Unsorted k b))
 -&gt; Term s (PMap 'Unsorted k b))
-&gt; (PMap keysort k a s -&gt; Term s (PMap 'Unsorted k b))
-&gt; Term s (PMap 'Unsorted k b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180395"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180395"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-49"></span><span>      </span><span class="annot"><span class="annottext">PMap 'Unsorted k b s -&gt; Term s (PMap 'Unsorted k b)
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">(PMap 'Unsorted k b s -&gt; Term s (PMap 'Unsorted k b))
-&gt; (Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
    -&gt; PMap 'Unsorted k b s)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s (PMap 'Unsorted k b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; PMap 'Unsorted k b s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; PMap keysort k v s
</span><span class="hs-identifier hs-var">PMap</span></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
 -&gt; Term s (PMap 'Unsorted k b))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s (PMap 'Unsorted k b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  ((PBuiltinPair (PAsData k) (PAsData a)
    :--&gt; PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
forall (list :: PType -&gt; PType) (a :: PType) (b :: PType) (s :: S).
(PListLike list, PElemConstraint list a, PElemConstraint list b) =&gt;
Term s ((a :--&gt; b) :--&gt; (list a :--&gt; list b))
</span><span class="hs-identifier hs-var">PList.pmap</span></span><span class="hs-cpp">
          # plam
</span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">x</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-53"></span><span>                </span><span class="hs-identifier">plet</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">pkvPairKey</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">x</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">key</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-54"></span><span>                  </span><span class="hs-identifier">ppairDataBuiltin</span><span class="hs-cpp">
                    # pdata key
</span><span class="hs-cpp">                    #$ pdata
</span><span>                    </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">key</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">pkvPairValue</span><span> </span><span class="hs-operator">#</span><span> </span><span class="hs-identifier">x</span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>            </span><span class="hs-special">)</span><span class="hs-cpp">
          # kvs'
</span><span>
</span><span id="line-61"></span><span class="annot"><span class="hs-comment">{- | If a value exists at the specified key, apply the function argument to it;
 otherwise, do nothing.
-}</span></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Plutarch.Extra.Map.html#padjust"><span class="hs-identifier hs-type">padjust</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180187"><span class="annot"><a href="#local-6989586621679180187"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180189"><span class="annot"><a href="#local-6989586621679180189"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180190"><span class="annot"><a href="#local-6989586621679180190"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180187"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PEq</span></span><span> </span><span class="annot"><a href="#local-6989586621679180187"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180189"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180190"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180189"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180189"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180187"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180187"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180189"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180187"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180189"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span id="padjust"><span class="annot"><span class="annottext">padjust :: forall (k :: PType) (v :: PType) (s :: S).
(PIsData k, PEq k, PIsData v) =&gt;
Term
  s
  ((v :--&gt; v)
   :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
</span><a href="Plutarch.Extra.Map.html#padjust"><span class="hs-identifier hs-var hs-var">padjust</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((v :--&gt; v)
   :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
-&gt; Term
     s
     ((v :--&gt; v)
      :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((v :--&gt; v)
    :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
 -&gt; Term
      s
      ((v :--&gt; v)
       :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v))))
-&gt; ClosedTerm
     ((v :--&gt; v)
      :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
-&gt; Term
     s
     ((v :--&gt; v)
      :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><span class="annottext">(Term s (v :--&gt; v)
 -&gt; Term s k
 -&gt; Term s (PMap 'Unsorted k v)
 -&gt; Term s (PMap 'Unsorted k v))
-&gt; Term
     s
     ((v :--&gt; v)
      :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s k
 -&gt; Term s (PMap 'Unsorted k v)
 -&gt; Term s (PMap 'Unsorted k v))
-&gt; Term
     s (c :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (v :--&gt; v)
  -&gt; Term s k
  -&gt; Term s (PMap 'Unsorted k v)
  -&gt; Term s (PMap 'Unsorted k v))
 -&gt; Term
      s
      ((v :--&gt; v)
       :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v))))
-&gt; (Term s (v :--&gt; v)
    -&gt; Term s k
    -&gt; Term s (PMap 'Unsorted k v)
    -&gt; Term s (PMap 'Unsorted k v))
-&gt; Term
     s
     ((v :--&gt; v)
      :--&gt; (k :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180428"><span class="annot"><span class="annottext">Term s (v :--&gt; v)
</span><a href="#local-6989586621679180428"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679180429"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180429"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679180430"><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k v)
</span><a href="#local-6989586621679180430"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><span class="annottext">Term
  s
  ((k :--&gt; (v :--&gt; v))
   :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v))
forall (k :: PType) (a :: PType) (b :: PType)
       (keysort :: KeyGuarantees) (s :: S).
(PIsData k, PIsData a, PIsData b) =&gt;
Term
  s
  ((k :--&gt; (a :--&gt; b))
   :--&gt; (PMap keysort k a :--&gt; PMap 'Unsorted k b))
</span><a href="Plutarch.Extra.Map.html#pmapWithKey"><span class="hs-identifier hs-var">pmapWithKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((k :--&gt; (v :--&gt; v))
   :--&gt; (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v))
-&gt; Term s (k :--&gt; (v :--&gt; v))
-&gt; Term s (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">(Term s k -&gt; Term s v -&gt; Term s v) -&gt; Term s (k :--&gt; (v :--&gt; v))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s v -&gt; Term s v) -&gt; Term s (c :--&gt; (v :--&gt; v))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180431"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180431"><span class="hs-identifier hs-var">k'</span></a></span></span><span> </span><span id="local-6989586621679180432"><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180432"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s PBool -&gt; Term s v -&gt; Term s v -&gt; Term s v
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><span class="hs-identifier hs-var">pif</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180431"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (s :: S). Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#==</span></span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180429"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (v :--&gt; v)
</span><a href="#local-6989586621679180428"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (v :--&gt; v) -&gt; Term s v -&gt; Term s v
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180432"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180432"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k v :--&gt; PMap 'Unsorted k v)
-&gt; Term s (PMap 'Unsorted k v) -&gt; Term s (PMap 'Unsorted k v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k v)
</span><a href="#local-6989586621679180430"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="annot"><span class="hs-comment">{- | As 'pkeysEqual', but requires only 'PEq' constraints for the keys, and
 works for 'Unsorted' 'PMap's. This requires a number of equality comparisons
 between keys proportional to the product of the lengths of both arguments:
 that is, this function is quadratic.
-}</span></span><span>
</span><span id="line-77"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pkeysEqualUnsorted"><span class="hs-identifier hs-type">pkeysEqualUnsorted</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180200"><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180201"><span class="annot"><a href="#local-6989586621679180201"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180202"><span class="annot"><a href="#local-6989586621679180202"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180203"><span class="annot"><a href="#local-6989586621679180203"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180201"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180202"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180203"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180201"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180202"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span id="pkeysEqualUnsorted"><span class="annot"><span class="annottext">pkeysEqualUnsorted :: forall (k :: PType) (a :: PType) (b :: PType) (s :: S).
(PIsData k, PIsData a, PIsData b) =&gt;
Term s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
</span><a href="Plutarch.Extra.Map.html#pkeysEqualUnsorted"><span class="hs-identifier hs-var hs-var">pkeysEqualUnsorted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
-&gt; Term s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
 -&gt; Term
      s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool)))
-&gt; ClosedTerm
     (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
-&gt; Term s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMap 'Unsorted k a)
 -&gt; Term s (PMap 'Unsorted k b) -&gt; Term s PBool)
-&gt; Term s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s (PMap 'Unsorted k b) -&gt; Term s PBool)
-&gt; Term s (c :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PMap 'Unsorted k a)
  -&gt; Term s (PMap 'Unsorted k b) -&gt; Term s PBool)
 -&gt; Term
      s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool)))
-&gt; (Term s (PMap 'Unsorted k a)
    -&gt; Term s (PMap 'Unsorted k b) -&gt; Term s PBool)
-&gt; Term s (PMap 'Unsorted k a :--&gt; (PMap 'Unsorted k b :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180448"><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180448"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span id="local-6989586621679180449"><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180449"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
-&gt; (PMap 'Unsorted k a s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180448"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap 'Unsorted k a s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMap 'Unsorted k a s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180450"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180450"><span class="hs-identifier hs-var">ell</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-84"></span><span>      </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
-&gt; (PMap 'Unsorted k b s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180449"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap 'Unsorted k b s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMap 'Unsorted k b s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180451"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180451"><span class="hs-identifier hs-var">ell'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
forall (s' :: S).
Term
  s'
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
</span><a href="#local-6989586621679180452"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
-&gt; Term s (PMap 'Unsorted k a)
-&gt; Term
     s
     (PMap 'Unsorted k b
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180448"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k b
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
               :--&gt; PBool)))
-&gt; Term s (PMap 'Unsorted k b)
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180449"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180450"><span class="hs-identifier hs-var">ell</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180451"><span class="hs-identifier hs-var">ell'</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="#local-6989586621679180452"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-88"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180209"><span class="annot"><a href="#local-6989586621679180209"><span class="hs-identifier hs-type">s'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-89"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="#local-6989586621679180209"><span class="hs-identifier hs-type">s'</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180201"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-92"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Unsorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180202"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-93"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180201"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180200"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180202"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span>
</span><span id="line-96"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621679180452"><span class="annot"><span class="annottext">go :: forall (s' :: S).
Term
  s'
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
</span><a href="#local-6989586621679180452"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s' :: S).
 Term
   s'
   (PMap 'Unsorted k a
    :--&gt; (PMap 'Unsorted k b
          :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                      :--&gt; PBool)))))
-&gt; Term
     s'
     (PMap 'Unsorted k a
      :--&gt; (PMap 'Unsorted k b
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                        :--&gt; PBool))))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">((forall (s' :: S).
  Term
    s'
    (PMap 'Unsorted k a
     :--&gt; (PMap 'Unsorted k b
           :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                 :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                       :--&gt; PBool)))))
 -&gt; Term
      s'
      (PMap 'Unsorted k a
       :--&gt; (PMap 'Unsorted k b
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                         :--&gt; PBool)))))
-&gt; (forall (s' :: S).
    Term
      s'
      (PMap 'Unsorted k a
       :--&gt; (PMap 'Unsorted k b
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                         :--&gt; PBool)))))
-&gt; Term
     s'
     (PMap 'Unsorted k a
      :--&gt; (PMap 'Unsorted k b
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                        :--&gt; PBool))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-98"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  (((PMap 'Unsorted k a
     :--&gt; (PMap 'Unsorted k b
           :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                 :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                       :--&gt; PBool))))
    :--&gt; (PMap 'Unsorted k a
          :--&gt; (PMap 'Unsorted k b
                :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                            :--&gt; PBool)))))
   :--&gt; (PMap 'Unsorted k a
         :--&gt; (PMap 'Unsorted k b
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                     :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                           :--&gt; PBool)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><span class="hs-identifier hs-var">pfix</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (((PMap 'Unsorted k a
     :--&gt; (PMap 'Unsorted k b
           :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                 :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                       :--&gt; PBool))))
    :--&gt; (PMap 'Unsorted k a
          :--&gt; (PMap 'Unsorted k b
                :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                            :--&gt; PBool)))))
   :--&gt; (PMap 'Unsorted k a
         :--&gt; (PMap 'Unsorted k b
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                     :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                           :--&gt; PBool)))))
-&gt; Term
     s
     ((PMap 'Unsorted k a
       :--&gt; (PMap 'Unsorted k b
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                         :--&gt; PBool))))
      :--&gt; (PMap 'Unsorted k a
            :--&gt; (PMap 'Unsorted k b
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                        :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                              :--&gt; PBool)))))
-&gt; Term
     s
     (PMap 'Unsorted k a
      :--&gt; (PMap 'Unsorted k b
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                        :--&gt; PBool))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#$</span></span><span> </span><span class="annot"><span class="annottext">(Term
   s
   (PMap 'Unsorted k a
    :--&gt; (PMap 'Unsorted k b
          :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                      :--&gt; PBool))))
 -&gt; Term s (PMap 'Unsorted k a)
 -&gt; Term s (PMap 'Unsorted k b)
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
 -&gt; Term s PBool)
-&gt; Term
     s
     ((PMap 'Unsorted k a
       :--&gt; (PMap 'Unsorted k b
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                         :--&gt; PBool))))
      :--&gt; (PMap 'Unsorted k a
            :--&gt; (PMap 'Unsorted k b
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                        :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                              :--&gt; PBool)))))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PMap 'Unsorted k a)
 -&gt; Term s (PMap 'Unsorted k b)
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
 -&gt; Term s PBool)
-&gt; Term
     s
     (c
      :--&gt; (PMap 'Unsorted k a
            :--&gt; (PMap 'Unsorted k b
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                        :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                              :--&gt; PBool)))))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term
    s
    (PMap 'Unsorted k a
     :--&gt; (PMap 'Unsorted k b
           :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                 :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                       :--&gt; PBool))))
  -&gt; Term s (PMap 'Unsorted k a)
  -&gt; Term s (PMap 'Unsorted k b)
  -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
  -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
  -&gt; Term s PBool)
 -&gt; Term
      s
      ((PMap 'Unsorted k a
        :--&gt; (PMap 'Unsorted k b
              :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                    :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                          :--&gt; PBool))))
       :--&gt; (PMap 'Unsorted k a
             :--&gt; (PMap 'Unsorted k b
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                               :--&gt; PBool))))))
-&gt; (Term
      s
      (PMap 'Unsorted k a
       :--&gt; (PMap 'Unsorted k b
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                         :--&gt; PBool))))
    -&gt; Term s (PMap 'Unsorted k a)
    -&gt; Term s (PMap 'Unsorted k b)
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
    -&gt; Term s PBool)
-&gt; Term
     s
     ((PMap 'Unsorted k a
       :--&gt; (PMap 'Unsorted k b
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                         :--&gt; PBool))))
      :--&gt; (PMap 'Unsorted k a
            :--&gt; (PMap 'Unsorted k b
                  :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
                        :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                              :--&gt; PBool)))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180509"><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
</span><a href="#local-6989586621679180509"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679180510"><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180510"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span id="local-6989586621679180511"><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180511"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span> </span><span id="local-6989586621679180512"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180512"><span class="hs-identifier hs-var">ell</span></a></span></span><span> </span><span id="local-6989586621679180513"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180513"><span class="hs-identifier hs-var">ell'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  (PMaybe
     (PPair
        (PBuiltinPair (PAsData k) (PAsData a))
        (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData a))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData a))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PMaybe (PPair a (list a)))
</span><span class="hs-identifier hs-var">PList.puncons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData a))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s
     (PMaybe
        (PPair
           (PBuiltinPair (PAsData k) (PAsData a))
           (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180512"><span class="hs-identifier hs-var">ell</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe
    (PPair
       (PBuiltinPair (PAsData k) (PAsData a))
       (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData a))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-100"></span><span>          </span><span class="annot"><span class="annottext">PMaybe
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
  s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMaybe
     (PPair
        (PBuiltinPair (PAsData k) (PAsData b))
        (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PMaybe (PPair a (list a)))
</span><span class="hs-identifier hs-var">PList.puncons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term
     s
     (PMaybe
        (PPair
           (PBuiltinPair (PAsData k) (PAsData b))
           (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180513"><span class="hs-identifier hs-var">ell'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe
    (PPair
       (PBuiltinPair (PAsData k) (PAsData b))
       (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-101"></span><span>            </span><span class="hs-comment">-- We reached the end, so we match</span><span>
</span><span id="line-102"></span><span>            </span><span class="annot"><span class="annottext">PMaybe
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
  s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PTrue</span></span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180518"><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><a href="#local-6989586621679180518"><span class="hs-identifier hs-var">ht'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData b))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><a href="#local-6989586621679180518"><span class="hs-identifier hs-var">ht'</span></a></span><span> </span><span class="annot"><span class="annottext">((PPair
    (PBuiltinPair (PAsData k) (PAsData b))
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData b))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PPair</span></span><span> </span><span id="local-6989586621679180520"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b))
</span><a href="#local-6989586621679180520"><span class="hs-identifier hs-var">h'</span></a></span></span><span> </span><span id="local-6989586621679180521"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180521"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-104"></span><span>              </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; (PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k a :--&gt; PMaybe a))
forall (k :: PType) (v :: PType) (s :: S) (any :: KeyGuarantees).
(PIsData k, PIsData v) =&gt;
Term s (k :--&gt; (PMap any k v :--&gt; PMaybe v))
</span><span class="hs-identifier hs-var">plookup</span></span><span> </span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k a :--&gt; PMaybe a))
-&gt; Term s k -&gt; Term s (PMap 'Unsorted k a :--&gt; PMaybe a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData b)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b))
</span><a href="#local-6989586621679180520"><span class="hs-identifier hs-var">h'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a :--&gt; PMaybe a)
-&gt; Term s (PMap 'Unsorted k a) -&gt; Term s (PMaybe a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180510"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-105"></span><span>                </span><span class="hs-comment">-- We mismatch, so fail</span><span>
</span><span id="line-106"></span><span>                </span><span class="annot"><span class="annottext">PMaybe a s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span>
</span><span id="line-107"></span><span>                </span><span class="hs-comment">-- We match, so continue</span><span>
</span><span id="line-108"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
</span><a href="#local-6989586621679180509"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
-&gt; Term s (PMap 'Unsorted k a)
-&gt; Term
     s
     (PMap 'Unsorted k b
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180510"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k b
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
               :--&gt; PBool)))
-&gt; Term s (PMap 'Unsorted k b)
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180511"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180512"><span class="hs-identifier hs-var">ell</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180521"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-109"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180523"><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
</span><a href="#local-6989586621679180523"><span class="hs-identifier hs-var">ht</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData a))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
</span><a href="#local-6989586621679180523"><span class="hs-identifier hs-var">ht</span></a></span><span> </span><span class="annot"><span class="annottext">((PPair
    (PBuiltinPair (PAsData k) (PAsData a))
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData a))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PPair</span></span><span> </span><span id="local-6989586621679180524"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a))
</span><a href="#local-6989586621679180524"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679180525"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180525"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-110"></span><span>            </span><span class="annot"><span class="annottext">Term
  s
  (PMaybe
     (PPair
        (PBuiltinPair (PAsData k) (PAsData b))
        (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PMaybe (PPair a (list a)))
</span><span class="hs-identifier hs-var">PList.puncons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term
     s
     (PMaybe
        (PPair
           (PBuiltinPair (PAsData k) (PAsData b))
           (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180513"><span class="hs-identifier hs-var">ell'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe
    (PPair
       (PBuiltinPair (PAsData k) (PAsData b))
       (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-111"></span><span>              </span><span class="annot"><span class="annottext">PMaybe
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
  s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe b) -&gt; (PMaybe b s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k b :--&gt; PMaybe b))
forall (k :: PType) (v :: PType) (s :: S) (any :: KeyGuarantees).
(PIsData k, PIsData v) =&gt;
Term s (k :--&gt; (PMap any k v :--&gt; PMaybe v))
</span><span class="hs-identifier hs-var">plookup</span></span><span> </span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k b :--&gt; PMaybe b))
-&gt; Term s k -&gt; Term s (PMap 'Unsorted k b :--&gt; PMaybe b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData a)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a))
</span><a href="#local-6989586621679180524"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b :--&gt; PMaybe b)
-&gt; Term s (PMap 'Unsorted k b) -&gt; Term s (PMaybe b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180511"><span class="hs-identifier hs-var">kvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe b s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMaybe b s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-112"></span><span>                </span><span class="hs-comment">-- We mismatch, so fail</span><span>
</span><span id="line-113"></span><span>                </span><span class="annot"><span class="annottext">PMaybe b s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span>
</span><span id="line-114"></span><span>                </span><span class="hs-comment">-- We match, so continue</span><span>
</span><span id="line-115"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span class="annot"><span class="annottext">Term s b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
</span><a href="#local-6989586621679180509"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
-&gt; Term s (PMap 'Unsorted k a)
-&gt; Term
     s
     (PMap 'Unsorted k b
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180510"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k b
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
               :--&gt; PBool)))
-&gt; Term s (PMap 'Unsorted k b)
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180511"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180525"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180513"><span class="hs-identifier hs-var">ell'</span></a></span><span>
</span><span id="line-116"></span><span>              </span><span class="hs-comment">-- To save some effort, we try both matches in one shot</span><span>
</span><span id="line-117"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180526"><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><a href="#local-6989586621679180526"><span class="hs-identifier hs-var">ht'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData b))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><a href="#local-6989586621679180526"><span class="hs-identifier hs-var">ht'</span></a></span><span> </span><span class="annot"><span class="annottext">((PPair
    (PBuiltinPair (PAsData k) (PAsData b))
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData b))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PPair</span></span><span> </span><span id="local-6989586621679180527"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b))
</span><a href="#local-6989586621679180527"><span class="hs-identifier hs-var">h'</span></a></span></span><span> </span><span id="local-6989586621679180528"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180528"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-118"></span><span>                </span><span class="annot"><span class="annottext">Term s (PMaybe b) -&gt; (PMaybe b s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k b :--&gt; PMaybe b))
forall (k :: PType) (v :: PType) (s :: S) (any :: KeyGuarantees).
(PIsData k, PIsData v) =&gt;
Term s (k :--&gt; (PMap any k v :--&gt; PMaybe v))
</span><span class="hs-identifier hs-var">plookup</span></span><span> </span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k b :--&gt; PMaybe b))
-&gt; Term s k -&gt; Term s (PMap 'Unsorted k b :--&gt; PMaybe b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData a)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a))
</span><a href="#local-6989586621679180524"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b :--&gt; PMaybe b)
-&gt; Term s (PMap 'Unsorted k b) -&gt; Term s (PMaybe b)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180511"><span class="hs-identifier hs-var">kvs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe b s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMaybe b s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-119"></span><span>                  </span><span class="hs-comment">-- We mismatch, so fail</span><span>
</span><span id="line-120"></span><span>                  </span><span class="annot"><span class="annottext">PMaybe b s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span>
</span><span id="line-121"></span><span>                  </span><span class="hs-comment">-- Try the other direction</span><span>
</span><span id="line-122"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span class="annot"><span class="annottext">Term s b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe a) -&gt; (PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k a :--&gt; PMaybe a))
forall (k :: PType) (v :: PType) (s :: S) (any :: KeyGuarantees).
(PIsData k, PIsData v) =&gt;
Term s (k :--&gt; (PMap any k v :--&gt; PMaybe v))
</span><span class="hs-identifier hs-var">plookup</span></span><span> </span><span class="annot"><span class="annottext">Term s (k :--&gt; (PMap 'Unsorted k a :--&gt; PMaybe a))
-&gt; Term s k -&gt; Term s (PMap 'Unsorted k a :--&gt; PMaybe a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData b)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b))
</span><a href="#local-6989586621679180527"><span class="hs-identifier hs-var">h'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a :--&gt; PMaybe a)
-&gt; Term s (PMap 'Unsorted k a) -&gt; Term s (PMaybe a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180510"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMaybe a s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-123"></span><span>                    </span><span class="hs-comment">-- We mismatch, so fail</span><span>
</span><span id="line-124"></span><span>                    </span><span class="annot"><span class="annottext">PMaybe a s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span>
</span><span id="line-125"></span><span>                    </span><span class="hs-comment">-- Both succeeded, so continue on tails</span><span>
</span><span id="line-126"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
</span><a href="#local-6989586621679180509"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k a
   :--&gt; (PMap 'Unsorted k b
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
               :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                     :--&gt; PBool))))
-&gt; Term s (PMap 'Unsorted k a)
-&gt; Term
     s
     (PMap 'Unsorted k b
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k a)
</span><a href="#local-6989586621679180510"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMap 'Unsorted k b
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
               :--&gt; PBool)))
-&gt; Term s (PMap 'Unsorted k b)
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Unsorted k b)
</span><a href="#local-6989586621679180511"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180525"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180528"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="annot"><span class="hs-comment">{- | Gives 'PTrue' if both argument 'PMap's contain mappings for exactly the
 same set of keys. Requires a number of equality comparisons between keys
 proportional to the length of the shorter argument.
-}</span></span><span>
</span><span id="line-132"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pkeysEqual"><span class="hs-identifier hs-type">pkeysEqual</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180229"><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180232"><span class="annot"><a href="#local-6989586621679180232"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180233"><span class="annot"><a href="#local-6989586621679180233"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180230"><span class="annot"><a href="#local-6989586621679180230"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PEq</span></span><span> </span><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-135"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180230"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Sorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180232"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Sorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180233"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span id="pkeysEqual"><span class="annot"><span class="annottext">pkeysEqual :: forall (k :: PType) (a :: PType) (b :: PType) (s :: S).
(PIsData k, PEq k) =&gt;
Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
</span><a href="Plutarch.Extra.Map.html#pkeysEqual"><span class="hs-identifier hs-var hs-var">pkeysEqual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
-&gt; Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
 -&gt; Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool)))
-&gt; ClosedTerm (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
-&gt; Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMap 'Sorted k a)
 -&gt; Term s (PMap 'Sorted k b) -&gt; Term s PBool)
-&gt; Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s (PMap 'Sorted k b) -&gt; Term s PBool)
-&gt; Term s (c :--&gt; (PMap 'Sorted k b :--&gt; PBool))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PMap 'Sorted k a)
  -&gt; Term s (PMap 'Sorted k b) -&gt; Term s PBool)
 -&gt; Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool)))
-&gt; (Term s (PMap 'Sorted k a)
    -&gt; Term s (PMap 'Sorted k b) -&gt; Term s PBool)
-&gt; Term s (PMap 'Sorted k a :--&gt; (PMap 'Sorted k b :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180541"><span class="annot"><span class="annottext">Term s (PMap 'Sorted k a)
</span><a href="#local-6989586621679180541"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span id="local-6989586621679180542"><span class="annot"><span class="annottext">Term s (PMap 'Sorted k b)
</span><a href="#local-6989586621679180542"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-138"></span><span>    </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k a)
-&gt; (PMap 'Sorted k a s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k a)
</span><a href="#local-6989586621679180541"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap 'Sorted k a s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMap 'Sorted k a s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180543"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180543"><span class="hs-identifier hs-var">ell</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k b)
-&gt; (PMap 'Sorted k b s -&gt; Term s PBool) -&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k b)
</span><a href="#local-6989586621679180542"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap 'Sorted k b s -&gt; Term s PBool) -&gt; Term s PBool)
-&gt; (PMap 'Sorted k b s -&gt; Term s PBool) -&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180544"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180544"><span class="hs-identifier hs-var">ell'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
forall (s' :: S).
Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
</span><a href="#local-6989586621679180545"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180543"><span class="hs-identifier hs-var">ell</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180544"><span class="hs-identifier hs-var">ell'</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="#local-6989586621679180545"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-143"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180239"><span class="annot"><a href="#local-6989586621679180239"><span class="hs-identifier hs-type">s'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-144"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="#local-6989586621679180239"><span class="hs-identifier hs-type">s'</span></a></span><span>
</span><span id="line-146"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180232"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180229"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180233"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679180545"><span class="annot"><span class="annottext">go :: forall (s' :: S).
Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
</span><a href="#local-6989586621679180545"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall (s' :: S).
 Term
   s'
   (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
    :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
          :--&gt; PBool)))
-&gt; Term
     s'
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">((forall (s' :: S).
  Term
    s'
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
     :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
           :--&gt; PBool)))
 -&gt; Term
      s'
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
             :--&gt; PBool)))
-&gt; (forall (s' :: S).
    Term
      s'
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
             :--&gt; PBool)))
-&gt; Term
     s'
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-151"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  (((PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
     :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
           :--&gt; PBool))
    :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
          :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                :--&gt; PBool)))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
               :--&gt; PBool)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (((a :--&gt; b) :--&gt; (a :--&gt; b)) :--&gt; (a :--&gt; b))
</span><span class="hs-identifier hs-var">pfix</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (((PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
     :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
           :--&gt; PBool))
    :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
          :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                :--&gt; PBool)))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
               :--&gt; PBool)))
-&gt; Term
     s
     ((PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
             :--&gt; PBool))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
            :--&gt; PBool))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#$</span></span><span> </span><span class="annot"><span class="annottext">(Term
   s
   (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
    :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
          :--&gt; PBool))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
 -&gt; Term s PBool)
-&gt; Term
     s
     ((PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
             :--&gt; PBool))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
 -&gt; Term s PBool)
-&gt; Term
     s
     (c
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term
    s
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
     :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
           :--&gt; PBool))
  -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
  -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
  -&gt; Term s PBool)
 -&gt; Term
      s
      ((PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
        :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
              :--&gt; PBool))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
             :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                   :--&gt; PBool))))
-&gt; (Term
      s
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
             :--&gt; PBool))
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
    -&gt; Term s PBool)
-&gt; Term
     s
     ((PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
       :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
             :--&gt; PBool))
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
            :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
                  :--&gt; PBool)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180579"><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
</span><a href="#local-6989586621679180579"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679180580"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180580"><span class="hs-identifier hs-var">ell</span></a></span></span><span> </span><span id="local-6989586621679180581"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180581"><span class="hs-identifier hs-var">ell'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="annottext">Term
  s
  (PMaybe
     (PPair
        (PBuiltinPair (PAsData k) (PAsData a))
        (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData a))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData a))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PMaybe (PPair a (list a)))
</span><span class="hs-identifier hs-var">PList.puncons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData a))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s
     (PMaybe
        (PPair
           (PBuiltinPair (PAsData k) (PAsData a))
           (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180580"><span class="hs-identifier hs-var">ell</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe
    (PPair
       (PBuiltinPair (PAsData k) (PAsData a))
       (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData a))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-153"></span><span>          </span><span class="annot"><span class="annottext">PMaybe
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
  s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMaybe
     (PPair
        (PBuiltinPair (PAsData k) (PAsData b))
        (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PMaybe (PPair a (list a)))
</span><span class="hs-identifier hs-var">PList.puncons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term
     s
     (PMaybe
        (PPair
           (PBuiltinPair (PAsData k) (PAsData b))
           (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180581"><span class="hs-identifier hs-var">ell'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe
    (PPair
       (PBuiltinPair (PAsData k) (PAsData b))
       (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-154"></span><span>            </span><span class="annot"><span class="annottext">PMaybe
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
  s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PTrue</span></span><span> </span><span class="hs-comment">-- no mismatches found</span><span>
</span><span id="line-155"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span> </span><span class="hs-comment">-- one argument too long</span><span>
</span><span id="line-156"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180582"><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
</span><a href="#local-6989586621679180582"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PMaybe
     (PPair
        (PBuiltinPair (PAsData k) (PAsData b))
        (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
PIsListLike list a =&gt;
Term s (list a :--&gt; PMaybe (PPair a (list a)))
</span><span class="hs-identifier hs-var">PList.puncons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
   :--&gt; PMaybe
          (PPair
             (PBuiltinPair (PAsData k) (PAsData b))
             (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term
     s
     (PMaybe
        (PPair
           (PBuiltinPair (PAsData k) (PAsData b))
           (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180581"><span class="hs-identifier hs-var">ell'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe
    (PPair
       (PBuiltinPair (PAsData k) (PAsData b))
       (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PMaybe
      (PPair
         (PBuiltinPair (PAsData k) (PAsData b))
         (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-157"></span><span>            </span><span class="annot"><span class="annottext">PMaybe
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
  s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span> </span><span class="hs-comment">-- one argument too long</span><span>
</span><span id="line-158"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180583"><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><a href="#local-6989586621679180583"><span class="hs-identifier hs-var">kv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData a))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData a))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))))
</span><a href="#local-6989586621679180582"><span class="hs-identifier hs-var">kv</span></a></span><span> </span><span class="annot"><span class="annottext">((PPair
    (PBuiltinPair (PAsData k) (PAsData a))
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData a))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PPair</span></span><span> </span><span id="local-6989586621679180584"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a))
</span><a href="#local-6989586621679180584"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621679180585"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180585"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-159"></span><span>              </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData b))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PPair
     (PBuiltinPair (PAsData k) (PAsData b))
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))))
</span><a href="#local-6989586621679180583"><span class="hs-identifier hs-var">kv'</span></a></span><span> </span><span class="annot"><span class="annottext">((PPair
    (PBuiltinPair (PAsData k) (PAsData b))
    (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
    s
  -&gt; Term s PBool)
 -&gt; Term s PBool)
-&gt; (PPair
      (PBuiltinPair (PAsData k) (PAsData b))
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
      s
    -&gt; Term s PBool)
-&gt; Term s PBool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PPair</span></span><span> </span><span id="local-6989586621679180586"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b))
</span><a href="#local-6989586621679180586"><span class="hs-identifier hs-var">h'</span></a></span></span><span> </span><span id="local-6989586621679180587"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180587"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>                </span><span class="annot"><span class="annottext">Term s PBool -&gt; Term s PBool -&gt; Term s PBool -&gt; Term s PBool
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><span class="hs-identifier hs-var">pif</span></span><span>
</span><span id="line-161"></span><span>                  </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData a)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData a))
</span><a href="#local-6989586621679180584"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (s :: S). Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData b)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData b))
</span><a href="#local-6989586621679180586"><span class="hs-identifier hs-var">h'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
</span><a href="#local-6989586621679180579"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a))
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b))
         :--&gt; PBool))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData a)))
</span><a href="#local-6989586621679180585"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)) :--&gt; PBool)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
-&gt; Term s PBool
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData b)))
</span><a href="#local-6989586621679180587"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- continue</span><span>
</span><span id="line-163"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PBool s -&gt; Term s PBool
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">PBool s
forall (s :: S). PBool s
</span><span class="hs-identifier hs-var">PFalse</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- key mismatch</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><span class="hs-comment">-- | Get the key of a key-value pair.</span></span><span>
</span><span id="line-166"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-type">pkvPairKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180176"><span class="annot"><a href="#local-6989586621679180176"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180178"><span class="annot"><a href="#local-6989586621679180178"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180177"><span class="annot"><a href="#local-6989586621679180177"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180176"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180177"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180176"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180178"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180176"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span id="pkvPairKey"><span class="annot"><span class="annottext">pkvPairKey :: forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var hs-var">pkvPairKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k))
-&gt; ClosedTerm (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s k) -&gt; Term s (c :--&gt; k)
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s k)
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k))
-&gt; (Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180596"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180596"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData k) -&gt; Term s k
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><span class="hs-identifier hs-var">pfromData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData k)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; a)
</span><span class="hs-identifier hs-var">pfstBuiltin</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s (PAsData k)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180596"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="annot"><span class="hs-comment">-- | Get the value of a key-value pair.</span></span><span>
</span><span id="line-173"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pkvPairValue"><span class="hs-identifier hs-type">pkvPairValue</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180186"><span class="annot"><a href="#local-6989586621679180186"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180184"><span class="annot"><a href="#local-6989586621679180184"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180185"><span class="annot"><a href="#local-6989586621679180185"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180184"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180185"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180186"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180184"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180184"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span id="pkvPairValue"><span class="annot"><span class="annottext">pkvPairValue :: forall (k :: PType) (v :: PType) (s :: S).
PIsData v =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
</span><a href="Plutarch.Extra.Map.html#pkvPairValue"><span class="hs-identifier hs-var hs-var">pkvPairValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v))
-&gt; ClosedTerm (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s v) -&gt; Term s (c :--&gt; v)
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s v)
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v))
-&gt; (Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180607"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180607"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PAsData v) -&gt; Term s v
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><span class="hs-identifier hs-var">pfromData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; b)
</span><span class="hs-identifier hs-var">psndBuiltin</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s (PAsData v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180607"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><span class="hs-comment">{- | Compare two key-value pairs by their keys. Gives 'PTrue' if the key of the
 first argument pair is less than the key of the second argument pair.
-}</span></span><span>
</span><span id="line-182"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pkvPairLt"><span class="hs-identifier hs-type">pkvPairLt</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180258"><span class="annot"><a href="#local-6989586621679180258"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180261"><span class="annot"><a href="#local-6989586621679180261"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180260"><span class="annot"><a href="#local-6989586621679180260"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180258"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PPartialOrd</span></span><span> </span><span class="annot"><a href="#local-6989586621679180258"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="#local-6989586621679180260"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180258"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180261"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180258"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180261"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PBool</span></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span id="pkvPairLt"><span class="annot"><span class="annottext">pkvPairLt :: forall (k :: PType) (v :: PType) (s :: S).
(PIsData k, PPartialOrd k) =&gt;
Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
</span><a href="Plutarch.Extra.Map.html#pkvPairLt"><span class="hs-identifier hs-var hs-var">pkvPairLt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
-&gt; Term
     s
     (PBuiltinPair (PAsData k) (PAsData v)
      :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   (PBuiltinPair (PAsData k) (PAsData v)
    :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
 -&gt; Term
      s
      (PBuiltinPair (PAsData k) (PAsData v)
       :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool)))
-&gt; ClosedTerm
     (PBuiltinPair (PAsData k) (PAsData v)
      :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
-&gt; Term
     s
     (PBuiltinPair (PAsData k) (PAsData v)
      :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PBuiltinPair (PAsData k) (PAsData v))
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s PBool)
-&gt; Term
     s
     (PBuiltinPair (PAsData k) (PAsData v)
      :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s PBool)
-&gt; Term
     s (c :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PBuiltinPair (PAsData k) (PAsData v))
  -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s PBool)
 -&gt; Term
      s
      (PBuiltinPair (PAsData k) (PAsData v)
       :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool)))
-&gt; (Term s (PBuiltinPair (PAsData k) (PAsData v))
    -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s PBool)
-&gt; Term
     s
     (PBuiltinPair (PAsData k) (PAsData v)
      :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PBool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180622"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180622"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span id="local-6989586621679180623"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180623"><span class="hs-identifier hs-var">kv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180622"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (s :: S). Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
PPartialOrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180623"><span class="hs-identifier hs-var">kv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="annot"><span class="hs-comment">-- | As 'plookup', but errors when the key is missing.</span></span><span>
</span><span id="line-196"></span><span class="annot"><a href="Plutarch.Extra.Map.html#ptryLookup"><span class="hs-identifier hs-type">ptryLookup</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180268"><span class="annot"><a href="#local-6989586621679180268"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180269"><span class="annot"><a href="#local-6989586621679180269"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180271"><span class="annot"><a href="#local-6989586621679180271"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyGuarantees</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180270"><span class="annot"><a href="#local-6989586621679180270"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180268"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180269"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180270"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180268"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679180271"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180268"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180269"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180269"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span id="ptryLookup"><span class="annot"><span class="annottext">ptryLookup :: forall (k :: PType) (v :: PType) (keys :: KeyGuarantees) (s :: S).
(PIsData k, PIsData v) =&gt;
Term s (k :--&gt; (PMap keys k v :--&gt; v))
</span><a href="Plutarch.Extra.Map.html#ptryLookup"><span class="hs-identifier hs-var hs-var">ptryLookup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (k :--&gt; (PMap keys k v :--&gt; v))
-&gt; Term s (k :--&gt; (PMap keys k v :--&gt; v))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (k :--&gt; (PMap keys k v :--&gt; v))
 -&gt; Term s (k :--&gt; (PMap keys k v :--&gt; v)))
-&gt; ClosedTerm (k :--&gt; (PMap keys k v :--&gt; v))
-&gt; Term s (k :--&gt; (PMap keys k v :--&gt; v))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span class="annot"><span class="annottext">(Term s k -&gt; Term s (PMap keys k v) -&gt; Term s v)
-&gt; Term s (k :--&gt; (PMap keys k v :--&gt; v))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s (PMap keys k v) -&gt; Term s v)
-&gt; Term s (c :--&gt; (PMap keys k v :--&gt; v))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s k -&gt; Term s (PMap keys k v) -&gt; Term s v)
 -&gt; Term s (k :--&gt; (PMap keys k v :--&gt; v)))
-&gt; (Term s k -&gt; Term s (PMap keys k v) -&gt; Term s v)
-&gt; Term s (k :--&gt; (PMap keys k v :--&gt; v))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180639"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180639"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679180640"><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679180640"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><span class="annottext">Term s (PString :--&gt; (PMaybe v :--&gt; v))
forall (a :: PType) (s :: S).
Term s (PString :--&gt; (PMaybe a :--&gt; a))
</span><a href="Plutarch.Extra.Maybe.html#passertPJust"><span class="hs-identifier hs-var">passertPJust</span></a></span><span class="hs-cpp">
      # &quot;plookupPartial: No value found for key.&quot;
</span><span class="hs-cpp">      # (plookup # k # kvs)
</span><span>
</span><span id="line-206"></span><span class="annot"><span class="hs-comment">{- | Get a list-like structure full of the keys of the argument 'PMap'. If the
 'PMap' is 'Sorted', the keys will maintain that order, and will be unique;
 otherwise, the order is unspecified, and duplicates may exist.

 = Note

 You will need to specify what manner of list-like structure you want; we have
 arranged the type signature to make specifying this easy with
 @TypeApplications@.
-}</span></span><span>
</span><span id="line-216"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pkeys"><span class="hs-identifier hs-type">pkeys</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">forall</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679180281"><span class="annot"><a href="#local-6989586621679180281"><span class="hs-identifier hs-type">ell</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679180282"><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679180285"><span class="annot"><a href="#local-6989586621679180285"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679180284"><span class="annot"><a href="#local-6989586621679180284"><span class="hs-identifier hs-type">keys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">KeyGuarantees</span></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679180283"><span class="annot"><a href="#local-6989586621679180283"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PListLike</span></span><span> </span><span class="annot"><a href="#local-6989586621679180281"><span class="hs-identifier hs-type">ell</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PElemConstraint</span></span><span> </span><span class="annot"><a href="#local-6989586621679180281"><span class="hs-identifier hs-type">ell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-224"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180283"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679180284"><span class="hs-identifier hs-type">keys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180285"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180281"><span class="hs-identifier hs-type">ell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span id="pkeys"><span class="annot"><span class="annottext">pkeys :: forall (ell :: PType -&gt; PType) (k :: PType) (v :: PType)
       (keys :: KeyGuarantees) (s :: S).
(PListLike ell, PElemConstraint ell (PAsData k)) =&gt;
Term s (PMap keys k v :--&gt; ell (PAsData k))
</span><a href="Plutarch.Extra.Map.html#pkeys"><span class="hs-identifier hs-var hs-var">pkeys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm (PMap keys k v :--&gt; ell (PAsData k))
-&gt; Term s (PMap keys k v :--&gt; ell (PAsData k))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm (PMap keys k v :--&gt; ell (PAsData k))
 -&gt; Term s (PMap keys k v :--&gt; ell (PAsData k)))
-&gt; ClosedTerm (PMap keys k v :--&gt; ell (PAsData k))
-&gt; Term s (PMap keys k v :--&gt; ell (PAsData k))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="annottext">(Term s (PMap keys k v) -&gt; Term s (ell (PAsData k)))
-&gt; Term s (PMap keys k v :--&gt; ell (PAsData k))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s (ell (PAsData k)))
-&gt; Term s (c :--&gt; ell (PAsData k))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (PMap keys k v) -&gt; Term s (ell (PAsData k)))
 -&gt; Term s (PMap keys k v :--&gt; ell (PAsData k)))
-&gt; (Term s (PMap keys k v) -&gt; Term s (ell (PAsData k)))
-&gt; Term s (PMap keys k v :--&gt; ell (PAsData k))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180658"><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679180658"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
-&gt; (PMap keys k v s -&gt; Term s (ell (PAsData k)))
-&gt; Term s (ell (PAsData k))
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap keys k v)
</span><a href="#local-6989586621679180658"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap keys k v s -&gt; Term s (ell (PAsData k)))
 -&gt; Term s (ell (PAsData k)))
-&gt; (PMap keys k v s -&gt; Term s (ell (PAsData k)))
-&gt; Term s (ell (PAsData k))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180659"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180659"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="annottext">(Term
   s
   (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
    :--&gt; ell (PAsData k))
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
 -&gt; Term s (ell (PAsData k)))
-&gt; (Term
      s
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
       :--&gt; ell (PAsData k))
    -&gt; Term s (ell (PAsData k)))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; ell (PAsData k))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (r :: PType).
PIsListLike list a =&gt;
(Term s (list a :--&gt; r) -&gt; Term s a -&gt; Term s (list a) -&gt; Term s r)
-&gt; (Term s (list a :--&gt; r) -&gt; Term s r) -&gt; Term s (list a :--&gt; r)
</span><span class="hs-identifier hs-var">precList</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (ell (PAsData k))
forall (s' :: S).
Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
-&gt; Term s' (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s' (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s' (ell (PAsData k))
</span><a href="#local-6989586621679180661"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (ell (PAsData k))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; ell (PAsData k))
-&gt; Term s (ell (PAsData k))
forall a b. a -&gt; b -&gt; a
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (ell (PAsData k))
forall (a :: PType) (s :: S).
PElemConstraint ell a =&gt;
Term s (ell a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a)
</span><span class="hs-identifier hs-var">pnil</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (ell (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180659"><span class="hs-identifier hs-var">kvs'</span></a></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>    </span><span class="annot"><a href="#local-6989586621679180661"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180296"><span class="annot"><a href="#local-6989586621679180296"><span class="hs-identifier hs-type">s'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-231"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180296"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180285"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180281"><span class="hs-identifier hs-type">ell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-232"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180296"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180285"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180296"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PBuiltinPair</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180285"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180296"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180281"><span class="hs-identifier hs-type">ell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PAsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180282"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621679180661"><span class="annot"><span class="annottext">go :: forall (s' :: S).
Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
-&gt; Term s' (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s' (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s' (ell (PAsData k))
</span><a href="#local-6989586621679180661"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679180666"><span class="annot"><span class="annottext">Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
</span><a href="#local-6989586621679180666"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679180667"><span class="annot"><span class="annottext">Term s' (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180667"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span id="local-6989586621679180668"><span class="annot"><span class="annottext">Term s' (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180668"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s' (PAsData k :--&gt; (ell (PAsData k) :--&gt; ell (PAsData k)))
forall (a :: PType) (s :: S).
PElemConstraint ell a =&gt;
Term s (a :--&gt; (ell a :--&gt; ell a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><span class="hs-identifier hs-var">pcons</span></span><span> </span><span class="annot"><span class="annottext">Term s' (PAsData k :--&gt; (ell (PAsData k) :--&gt; ell (PAsData k)))
-&gt; Term s' (PAsData k)
-&gt; Term s' (ell (PAsData k) :--&gt; ell (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s' (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData k)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; a)
</span><span class="hs-identifier hs-var">pfstBuiltin</span></span><span> </span><span class="annot"><span class="annottext">Term s' (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData k)
-&gt; Term s' (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s' (PAsData k)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s' (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180667"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s' (ell (PAsData k) :--&gt; ell (PAsData k))
-&gt; Term s' (ell (PAsData k)) -&gt; Term s' (ell (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
</span><a href="#local-6989586621679180666"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s'
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; ell (PAsData k))
-&gt; Term s' (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s' (ell (PAsData k))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s' (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180668"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><span class="hs-comment">{- | Given an \'updater\' and a key, if the key exists in the 'PMap', apply the
 \'updater\' to it, otherwise do nothing. If the \'updater\' produces
 'PNothing', the value is deleted; otherwise, it is modified to the result.

 Performance will be equivalent to a lookup followed by an insert (or delete),
 as well as the cost of calling the \'updater\'.
-}</span></span><span>
</span><span id="line-244"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pupdate"><span class="hs-identifier hs-type">pupdate</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180305"><span class="annot"><a href="#local-6989586621679180305"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180306"><span class="annot"><a href="#local-6989586621679180306"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180308"><span class="annot"><a href="#local-6989586621679180308"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180305"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180306"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">POrd</span></span><span> </span><span class="annot"><a href="#local-6989586621679180305"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-247"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180308"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180306"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMaybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679180306"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180305"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Sorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180305"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180306"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Sorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180305"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180306"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span id="pupdate"><span class="annot"><span class="annottext">pupdate :: forall (k :: PType) (v :: PType) (s :: S).
(PIsData k, PIsData v, POrd k) =&gt;
Term
  s
  ((v :--&gt; PMaybe v)
   :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
</span><a href="Plutarch.Extra.Map.html#pupdate"><span class="hs-identifier hs-var hs-var">pupdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((v :--&gt; PMaybe v)
   :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((v :--&gt; PMaybe v)
    :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
 -&gt; Term
      s
      ((v :--&gt; PMaybe v)
       :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v))))
-&gt; ClosedTerm
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><span class="annottext">(Term s (v :--&gt; PMaybe v)
 -&gt; Term s k
 -&gt; Term s (PMap 'Sorted k v)
 -&gt; Term s (PMap 'Sorted k v))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s k
 -&gt; Term s (PMap 'Sorted k v)
 -&gt; Term s (PMap 'Sorted k v))
-&gt; Term
     s (c :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (v :--&gt; PMaybe v)
  -&gt; Term s k
  -&gt; Term s (PMap 'Sorted k v)
  -&gt; Term s (PMap 'Sorted k v))
 -&gt; Term
      s
      ((v :--&gt; PMaybe v)
       :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v))))
-&gt; (Term s (v :--&gt; PMaybe v)
    -&gt; Term s k
    -&gt; Term s (PMap 'Sorted k v)
    -&gt; Term s (PMap 'Sorted k v))
-&gt; Term
     s
     ((v :--&gt; PMaybe v)
      :--&gt; (k :--&gt; (PMap 'Sorted k v :--&gt; PMap 'Sorted k v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180710"><span class="annot"><span class="annottext">Term s (v :--&gt; PMaybe v)
</span><a href="#local-6989586621679180710"><span class="hs-identifier hs-var">updater</span></a></span></span><span> </span><span id="local-6989586621679180711"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180711"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span id="local-6989586621679180712"><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
</span><a href="#local-6989586621679180712"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
-&gt; (PMap 'Sorted k v s -&gt; Term s (PMap 'Sorted k v))
-&gt; Term s (PMap 'Sorted k v)
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
</span><a href="#local-6989586621679180712"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap 'Sorted k v s -&gt; Term s (PMap 'Sorted k v))
 -&gt; Term s (PMap 'Sorted k v))
-&gt; (PMap 'Sorted k v s -&gt; Term s (PMap 'Sorted k v))
-&gt; Term s (PMap 'Sorted k v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180713"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180713"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><span class="annottext">PMap 'Sorted k v s -&gt; Term s (PMap 'Sorted k v)
forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><span class="hs-identifier hs-var">pcon</span></span><span> </span><span class="annot"><span class="annottext">(PMap 'Sorted k v s -&gt; Term s (PMap 'Sorted k v))
-&gt; (Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
    -&gt; PMap 'Sorted k v s)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PMap 'Sorted k v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; PMap 'Sorted k v s
forall (keysort :: KeyGuarantees) (k :: PType) (v :: PType)
       (s :: S).
Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; PMap keysort k v s
</span><span class="hs-identifier hs-var">PMap</span></span><span> </span><span class="annot"><span class="annottext">(Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
 -&gt; Term s (PMap 'Sorted k v))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PMap 'Sorted k v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-251"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(Term
   s
   (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
    :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; (Term
      s
      (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
       :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (r :: PType).
PIsListLike list a =&gt;
(Term s (list a :--&gt; r) -&gt; Term s a -&gt; Term s (list a) -&gt; Term s r)
-&gt; (Term s (list a :--&gt; r) -&gt; Term s r) -&gt; Term s (list a :--&gt; r)
</span><span class="hs-identifier hs-var">precList</span></span><span>
</span><span id="line-252"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180714"><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180714"><span class="hs-identifier hs-var">self</span></a></span></span><span> </span><span id="local-6989586621679180715"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180715"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679180716"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180716"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>              </span><span class="annot"><span class="annottext">Term s k
-&gt; (Term s k
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s a -&gt; (Term s a -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">plet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PAsData k) -&gt; Term s k
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><span class="hs-identifier hs-var">pfromData</span></span><span> </span><span class="annot"><span class="annottext">(Term s (PAsData k) -&gt; Term s k) -&gt; Term s (PAsData k) -&gt; Term s k
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData k)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; a)
</span><span class="hs-identifier hs-var">pfstBuiltin</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s (PAsData k)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180715"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Term s k
  -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; (Term s k
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180717"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180717"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-254"></span><span>                </span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><span class="hs-identifier hs-var">pif</span></span><span>
</span><span id="line-255"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180717"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (s :: S). Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
PEq t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#==</span></span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180711"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>                  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Term s (PMaybe v)
-&gt; (PMaybe v s
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (v :--&gt; PMaybe v)
</span><a href="#local-6989586621679180710"><span class="hs-identifier hs-var">updater</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (v :--&gt; PMaybe v) -&gt; Term s v -&gt; Term s (PMaybe v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData v) -&gt; Term s v
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s (PAsData a) -&gt; Term s a
</span><span class="hs-identifier hs-var">pfromData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (PBuiltinPair a b :--&gt; b)
</span><span class="hs-identifier hs-var">psndBuiltin</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; PAsData v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s (PAsData v)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180715"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((PMaybe v s
  -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
 -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; (PMaybe v s
    -&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-257"></span><span>                      </span><span class="annot"><span class="annottext">PMaybe v s
</span><span class="hs-identifier hs-var">PNothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180714"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180716"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-258"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">PJust</span></span><span> </span><span id="local-6989586621679180718"><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180718"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
forall (a :: PType) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (a :--&gt; (PBuiltinList a :--&gt; PBuiltinList a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><span class="hs-identifier hs-var">pcons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PAsData k
   :--&gt; (PAsData v :--&gt; PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term
  s
  (PAsData a
   :--&gt; (PAsData b :--&gt; PBuiltinPair (PAsData a) (PAsData b)))
</span><span class="hs-identifier hs-var">ppairDataBuiltin</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PAsData k
   :--&gt; (PAsData v :--&gt; PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PAsData k)
-&gt; Term s (PAsData v :--&gt; PBuiltinPair (PAsData k) (PAsData v))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s (PAsData k)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><span class="hs-identifier hs-var">pdata</span></span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180717"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PAsData v :--&gt; PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term s (PAsData v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s v -&gt; Term s (PAsData v)
forall (a :: PType) (s :: S).
PIsData a =&gt;
Term s a -&gt; Term s (PAsData a)
</span><span class="hs-identifier hs-var">pdata</span></span><span> </span><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180718"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#$</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180714"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180716"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-259"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s PBool
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType).
Term s PBool -&gt; Term s a -&gt; Term s a -&gt; Term s a
</span><span class="hs-identifier hs-var">pif</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180711"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Term s k -&gt; Term s k -&gt; Term s PBool
forall (s :: S). Term s k -&gt; Term s k -&gt; Term s PBool
forall (t :: PType) (s :: S).
PPartialOrd t =&gt;
Term s t -&gt; Term s t -&gt; Term s PBool
</span><span class="hs-operator hs-var">#&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180717"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
forall (a :: PType) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (a :--&gt; (PBuiltinList a :--&gt; PBuiltinList a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><span class="hs-identifier hs-var">pcons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180715"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180716"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
forall (a :: PType) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (a :--&gt; (PBuiltinList a :--&gt; PBuiltinList a))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (a :--&gt; (list a :--&gt; list a))
</span><span class="hs-identifier hs-var">pcons</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinPair (PAsData k) (PAsData v)
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
         :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))))
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180715"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#$</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180714"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
   :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180716"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term
     s
     (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v))
      :--&gt; PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall a b. a -&gt; b -&gt; a
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
forall (a :: PType) (s :: S).
PElemConstraint PBuiltinList a =&gt;
Term s (PBuiltinList a)
forall (list :: PType -&gt; PType) (a :: PType) (s :: S).
(PListLike list, PElemConstraint list a) =&gt;
Term s (list a)
</span><span class="hs-identifier hs-var">pnil</span></span><span class="hs-special">)</span><span class="hs-cpp">
          # kvs'
</span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="annot"><span class="hs-comment">{- | Left-associative fold of a 'PMap' with keys. Keys and values will be
 presented in key order.
-}</span></span><span>
</span><span id="line-269"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pfoldlWithKey"><span class="hs-identifier hs-type">pfoldlWithKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180317"><span class="annot"><a href="#local-6989586621679180317"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180314"><span class="annot"><a href="#local-6989586621679180314"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180315"><span class="annot"><a href="#local-6989586621679180315"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180316"><span class="annot"><a href="#local-6989586621679180316"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180314"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180315"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180316"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180317"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180314"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180315"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180317"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180317"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Sorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180314"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180315"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180317"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span id="pfoldlWithKey"><span class="annot"><span class="annottext">pfoldlWithKey :: forall (a :: PType) (k :: PType) (v :: PType) (s :: S).
(PIsData k, PIsData v) =&gt;
Term
  s
  ((a :--&gt; (k :--&gt; (v :--&gt; a)))
   :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
</span><a href="Plutarch.Extra.Map.html#pfoldlWithKey"><span class="hs-identifier hs-var hs-var">pfoldlWithKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm
  ((a :--&gt; (k :--&gt; (v :--&gt; a)))
   :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
-&gt; Term
     s
     ((a :--&gt; (k :--&gt; (v :--&gt; a)))
      :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm
   ((a :--&gt; (k :--&gt; (v :--&gt; a)))
    :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
 -&gt; Term
      s
      ((a :--&gt; (k :--&gt; (v :--&gt; a)))
       :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a))))
-&gt; ClosedTerm
     ((a :--&gt; (k :--&gt; (v :--&gt; a)))
      :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
-&gt; Term
     s
     ((a :--&gt; (k :--&gt; (v :--&gt; a)))
      :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-274"></span><span>  </span><span class="annot"><span class="annottext">(Term s (a :--&gt; (k :--&gt; (v :--&gt; a)))
 -&gt; Term s a -&gt; Term s (PMap 'Sorted k v) -&gt; Term s a)
-&gt; Term
     s
     ((a :--&gt; (k :--&gt; (v :--&gt; a)))
      :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s a -&gt; Term s (PMap 'Sorted k v) -&gt; Term s a)
-&gt; Term s (c :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (a :--&gt; (k :--&gt; (v :--&gt; a)))
  -&gt; Term s a -&gt; Term s (PMap 'Sorted k v) -&gt; Term s a)
 -&gt; Term
      s
      ((a :--&gt; (k :--&gt; (v :--&gt; a)))
       :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a))))
-&gt; (Term s (a :--&gt; (k :--&gt; (v :--&gt; a)))
    -&gt; Term s a -&gt; Term s (PMap 'Sorted k v) -&gt; Term s a)
-&gt; Term
     s
     ((a :--&gt; (k :--&gt; (v :--&gt; a)))
      :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180745"><span class="annot"><span class="annottext">Term s (a :--&gt; (k :--&gt; (v :--&gt; a)))
</span><a href="#local-6989586621679180745"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679180746"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679180746"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679180747"><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
</span><a href="#local-6989586621679180747"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
-&gt; (PMap 'Sorted k v s -&gt; Term s a) -&gt; Term s a
forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><span class="hs-identifier hs-var">pmatch</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
</span><a href="#local-6989586621679180747"><span class="hs-identifier hs-var">kvs</span></a></span><span> </span><span class="annot"><span class="annottext">((PMap 'Sorted k v s -&gt; Term s a) -&gt; Term s a)
-&gt; (PMap 'Sorted k v s -&gt; Term s a) -&gt; Term s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span id="local-6989586621679180748"><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180748"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-276"></span><span>      </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; a))
   :--&gt; (a
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)) :--&gt; a)))
forall (list :: PType -&gt; PType) (a :: PType) (s :: S) (b :: PType).
PIsListLike list a =&gt;
Term s ((b :--&gt; (a :--&gt; b)) :--&gt; (b :--&gt; (list a :--&gt; b)))
</span><span class="hs-identifier hs-var">pfoldl</span></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((a :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; a))
   :--&gt; (a
         :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)) :--&gt; a)))
-&gt; Term s (a :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; a))
-&gt; Term
     s
     (a
      :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)) :--&gt; a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">(Term s a
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s a)
-&gt; Term s (a :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; a))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c
 -&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s a)
-&gt; Term s (c :--&gt; (PBuiltinPair (PAsData k) (PAsData v) :--&gt; a))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180750"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679180750"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621679180751"><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180751"><span class="hs-identifier hs-var">kv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (k :--&gt; (v :--&gt; a)))
</span><a href="#local-6989586621679180745"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; (k :--&gt; (v :--&gt; a)))
-&gt; Term s a -&gt; Term s (k :--&gt; (v :--&gt; a))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679180750"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (k :--&gt; (v :--&gt; a)) -&gt; Term s k -&gt; Term s (v :--&gt; a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
forall (k :: PType) (v :: PType) (s :: S).
PIsData k =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
</span><a href="Plutarch.Extra.Map.html#pkvPairKey"><span class="hs-identifier hs-var">pkvPairKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; k)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s k
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180751"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (v :--&gt; a) -&gt; Term s v -&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
forall (k :: PType) (v :: PType) (s :: S).
PIsData v =&gt;
Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
</span><a href="Plutarch.Extra.Map.html#pkvPairValue"><span class="hs-identifier hs-var">pkvPairValue</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v) :--&gt; v)
-&gt; Term s (PBuiltinPair (PAsData k) (PAsData v)) -&gt; Term s v
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinPair (PAsData k) (PAsData v))
</span><a href="#local-6989586621679180751"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
  s
  (a
   :--&gt; (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)) :--&gt; a))
-&gt; Term s a
-&gt; Term
     s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)) :--&gt; a)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679180746"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)) :--&gt; a)
-&gt; Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
-&gt; Term s a
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PBuiltinList (PBuiltinPair (PAsData k) (PAsData v)))
</span><a href="#local-6989586621679180748"><span class="hs-identifier hs-var">kvs'</span></a></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><span class="hs-comment">{- | Project all key-value pairs into a 'Monoid', then combine. Keys and values
 will be presented in key order.
-}</span></span><span>
</span><span id="line-281"></span><span class="annot"><a href="Plutarch.Extra.Map.html#pfoldMapWithKey"><span class="hs-identifier hs-type">pfoldMapWithKey</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180330"><span class="annot"><a href="#local-6989586621679180330"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180327"><span class="annot"><a href="#local-6989586621679180327"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180328"><span class="annot"><a href="#local-6989586621679180328"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PType</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180331"><span class="annot"><a href="#local-6989586621679180331"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180327"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIsData</span></span><span> </span><span class="annot"><a href="#local-6989586621679180328"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180329"><span class="annot"><a href="#local-6989586621679180329"><span class="hs-identifier hs-type">s'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S</span></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180329"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180330"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-284"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621679180331"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679180327"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180328"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180330"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PMap</span></span><span> </span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier hs-type">Sorted</span></span><span> </span><span class="annot"><a href="#local-6989586621679180327"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180328"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:--&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679180330"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span id="pfoldMapWithKey"><span class="annot"><span class="annottext">pfoldMapWithKey :: forall (m :: PType) (k :: PType) (v :: PType) (s :: S).
(PIsData k, PIsData v, forall (s' :: S). Monoid (Term s' m)) =&gt;
Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
</span><a href="Plutarch.Extra.Map.html#pfoldMapWithKey"><span class="hs-identifier hs-var hs-var">pfoldMapWithKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClosedTerm ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
-&gt; Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><span class="hs-identifier hs-var">phoistAcyclic</span></span><span> </span><span class="annot"><span class="annottext">(ClosedTerm ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
 -&gt; Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m)))
-&gt; ClosedTerm ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
-&gt; Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><span class="annottext">(Term s (k :--&gt; (v :--&gt; m))
 -&gt; Term s (PMap 'Sorted k v) -&gt; Term s m)
-&gt; Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s (PMap 'Sorted k v) -&gt; Term s m)
-&gt; Term s (c :--&gt; (PMap 'Sorted k v :--&gt; m))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="annot"><span class="annottext">((Term s (k :--&gt; (v :--&gt; m))
  -&gt; Term s (PMap 'Sorted k v) -&gt; Term s m)
 -&gt; Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m)))
-&gt; (Term s (k :--&gt; (v :--&gt; m))
    -&gt; Term s (PMap 'Sorted k v) -&gt; Term s m)
-&gt; Term s ((k :--&gt; (v :--&gt; m)) :--&gt; (PMap 'Sorted k v :--&gt; m))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180775"><span class="annot"><span class="annottext">Term s (k :--&gt; (v :--&gt; m))
</span><a href="#local-6989586621679180775"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679180776"><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
</span><a href="#local-6989586621679180776"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><span class="annottext">Term
  s
  ((m :--&gt; (k :--&gt; (v :--&gt; m)))
   :--&gt; (m :--&gt; (PMap 'Sorted k v :--&gt; m)))
forall (a :: PType) (k :: PType) (v :: PType) (s :: S).
(PIsData k, PIsData v) =&gt;
Term
  s
  ((a :--&gt; (k :--&gt; (v :--&gt; a)))
   :--&gt; (a :--&gt; (PMap 'Sorted k v :--&gt; a)))
</span><a href="Plutarch.Extra.Map.html#pfoldlWithKey"><span class="hs-identifier hs-var">pfoldlWithKey</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  s
  ((m :--&gt; (k :--&gt; (v :--&gt; m)))
   :--&gt; (m :--&gt; (PMap 'Sorted k v :--&gt; m)))
-&gt; Term s (m :--&gt; (k :--&gt; (v :--&gt; m)))
-&gt; Term s (m :--&gt; (PMap 'Sorted k v :--&gt; m))
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">(Term s m -&gt; Term s k -&gt; Term s v -&gt; Term s m)
-&gt; Term s (m :--&gt; (k :--&gt; (v :--&gt; m)))
forall a (b :: PType) (s :: S) (c :: PType).
(PLamN a b s, HasCallStack) =&gt;
(Term s c -&gt; a) -&gt; Term s (c :--&gt; b)
forall (c :: PType).
HasCallStack =&gt;
(Term s c -&gt; Term s k -&gt; Term s v -&gt; Term s m)
-&gt; Term s (c :--&gt; (k :--&gt; (v :--&gt; m)))
</span><span class="hs-identifier hs-var">plam</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180777"><span class="annot"><span class="annottext">Term s m
</span><a href="#local-6989586621679180777"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621679180778"><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180778"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679180779"><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180779"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s m
</span><a href="#local-6989586621679180777"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Term s m -&gt; Term s m -&gt; Term s m
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (k :--&gt; (v :--&gt; m))
</span><a href="#local-6989586621679180775"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (k :--&gt; (v :--&gt; m)) -&gt; Term s k -&gt; Term s (v :--&gt; m)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s k
</span><a href="#local-6989586621679180778"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (v :--&gt; m) -&gt; Term s v -&gt; Term s m
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s v
</span><a href="#local-6989586621679180779"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s (m :--&gt; (PMap 'Sorted k v :--&gt; m))
-&gt; Term s m -&gt; Term s (PMap 'Sorted k v :--&gt; m)
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s m
forall a. Monoid a =&gt; a
</span><a href="../../../ghc-9.6.3/html/libraries/base-4.18.1.0/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v :--&gt; m)
-&gt; Term s (PMap 'Sorted k v) -&gt; Term s m
forall (s :: S) (a :: PType) (b :: PType).
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><span class="hs-operator hs-var">#</span></span><span> </span><span class="annot"><span class="annottext">Term s (PMap 'Sorted k v)
</span><a href="#local-6989586621679180776"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-288"></span></pre></body></html>
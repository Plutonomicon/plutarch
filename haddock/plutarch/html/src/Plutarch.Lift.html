<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="annot"><span class="hs-comment">{- |
Module: Plutarch.Lift
Description: Conversion to and from Plutarch terms and Haskell types

This module defines functions, associated type families, and newtypes for use with
[@DerivingVia@](https://ryanglscott.github.io/papers/deriving-via.pdf) to allow
Plutarch to convert to and from PTypes and Haskell types.
-}</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Lift</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Conversion between Plutarch terms and Haskell types</span></span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#pconstant"><span class="hs-identifier">pconstant</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#plift"><span class="hs-identifier">plift</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#plift%27"><span class="hs-identifier">plift'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#LiftError"><span class="hs-identifier">LiftError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Define your own conversion</span></span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier">PConstantDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier">PLift</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#PConstant"><span class="hs-identifier">PConstant</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantDirect"><span class="hs-identifier">DerivePConstantDirect</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaNewtype"><span class="hs-identifier">DerivePConstantViaNewtype</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaBuiltin"><span class="hs-identifier">DerivePConstantViaBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Internal use</span></span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#PUnsafeLiftDecl"><span class="hs-identifier">PUnsafeLiftDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(^?)</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Coerce.html"><span class="hs-identifier">Data.Coerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Coercible"><span class="hs-identifier">Coercible</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier">coerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Kind.html"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Constraint"><span class="hs-identifier">Constraint</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Stack.html"><span class="hs-identifier">GHC.Stack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.html"><span class="hs-identifier">Plutarch.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier">ClosedTerm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier">Config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier">Config</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%24sel%3AtracingMode%3AConfig"><span class="hs-identifier">tracingMode</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier">PType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier">Term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#compile"><span class="hs-identifier">compile</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#punsafeConstantInternal"><span class="hs-identifier">punsafeConstantInternal</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#DoTracing"><span class="hs-identifier">DoTracing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Evaluate.html"><span class="hs-identifier">Plutarch.Internal.Evaluate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Evaluate.html#EvalError"><span class="hs-identifier">EvalError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Evaluate.html#evalScriptHuge"><span class="hs-identifier">evalScriptHuge</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Script.html"><span class="hs-identifier">Plutarch.Script</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Script.html#%24sel%3AunScript%3AScript"><span class="hs-identifier">unScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusCore</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLC</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusCore.Builtin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">KnownTypeError</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readKnownConstant</span></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusCore.Evaluation.Machine.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_UnliftingErrorE</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BuiltinData</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Data</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">builtinDataToData</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">dataToBuiltinData</span></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx.Builtins.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FromBuiltin</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToBuiltin</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromBuiltin</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toBuiltin</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Universe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Includes</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">UntypedPlutusCore</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><span class="hs-comment">{- |
Laws:
 - It must be that @PConstantRepr (PLifted p)@ when encoded as a constant
   in UPLC (via the 'UntypedPlutusCore.Constant' constructor) is a valid @p@.
-}</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier hs-type">PConstantDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755570"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-type">PConstanted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755570"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755570"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="PUnsafeLiftDecl"><span class="annot"><a href="Plutarch.Lift.html#PUnsafeLiftDecl"><span class="hs-identifier hs-var">PUnsafeLiftDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679755570"><span class="annot"><a href="#local-6989586621679755570"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PLifted"><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-var">PLifted</span></a></span></span><span> </span><span id="local-6989586621679755570"><span class="annot"><a href="#local-6989586621679755570"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679755810"><span class="annot"><a href="#local-6989586621679755810"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621679755810"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679755570"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="annot"><span class="hs-comment">{- | Class of Haskell types `h` that can be represented as a Plutus core builtin
and converted to a Plutarch type.

The Plutarch type is determined by `PConstanted h`. Its Plutus Core representation is given by `PConstantRepr h`.

This typeclass is closely tied with 'PLift'.

Laws:
 - @pconstantFromRepr . pconstantToRepr &#8801; Just@
 - @(pconstantToRepr &lt;$&gt;) . pconstantFromRepr &#8801; Just@
 - @plift . pfromData . flip ptryFrom fst . pconstant . PlutusTx.toData &#8801; id@
 - @PlutusTx.fromData . plift . pforgetData . pdata . pconstant &#8801; Just@

These laws must be upheld for the sake of soundness of the type system.
-}</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">class</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PUnsafeLiftDecl"><span class="hs-identifier hs-type">PUnsafeLiftDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-type">PConstanted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.DefaultUni</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">`Includes`</span></span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-type">PConstantRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-75"></span><span>  </span><span id="PConstantDecl"><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier hs-var">PConstantDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679755575"><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstantRepr"><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-var">PConstantRepr</span></a></span></span><span> </span><span id="local-6989586621679755575"><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstanted"><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-var">PConstanted</span></a></span></span><span> </span><span id="local-6989586621679755575"><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span id="pconstantToRepr"><span class="annot"><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-type">pconstantToRepr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-type">PConstantRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span id="pconstantFromRepr"><span class="annot"><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-type">pconstantFromRepr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-type">PConstantRepr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755575"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="annot"><span class="hs-comment">{- | Class of Plutarch types `p` that can be converted to/from a Haskell type.

The Haskell type is determined by `PLifted p`.

This typeclass is closely tied with 'PConstant'.
-}</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">type</span><span> </span><span id="PLift"><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-var">PLift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PUnsafeLiftDecl"><span class="hs-identifier hs-type">PUnsafeLiftDecl</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><span class="hs-comment">{- | Create a Plutarch-level constant, from a Haskell value.
Example:
&gt; pconstant @PInteger 42
-}</span></span><span>
</span><span id="line-95"></span><span class="annot"><a href="Plutarch.Lift.html#pconstant"><span class="hs-identifier hs-type">pconstant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679755580"><span class="annot"><a href="#local-6989586621679755580"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621679755582"><span class="annot"><a href="#local-6989586621679755582"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755580"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755580"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755582"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755580"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-96"></span><span id="pconstant"><span class="annot"><span class="annottext">pconstant :: forall (p :: PType) (s :: S). PLift p =&gt; PLifted p -&gt; Term s p
</span><a href="Plutarch.Lift.html#pconstant"><span class="hs-identifier hs-var hs-var">pconstant</span></a></span></span><span> </span><span id="local-6989586621679755823"><span class="annot"><span class="annottext">PLifted p
</span><a href="#local-6989586621679755823"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni) -&gt; Term s p
forall (s :: S) (a :: PType).
Some @Type (ValueOf DefaultUni) -&gt; Term s a
</span><a href="Plutarch.Internal.html#punsafeConstantInternal"><span class="hs-identifier hs-var">punsafeConstantInternal</span></a></span><span> </span><span class="annot"><span class="annottext">(Some @Type (ValueOf DefaultUni) -&gt; Term s p)
-&gt; Some @Type (ValueOf DefaultUni) -&gt; Term s p
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a (uni :: Type -&gt; Type).
Contains @Type uni a =&gt;
a -&gt; Some @Type (ValueOf uni)
</span><span class="hs-identifier hs-var">PLC.someValue</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-type">PConstantRepr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755580"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">PLC.DefaultUni</span></span><span> </span><span class="annot"><span class="annottext">(PConstantRepr (PLifted p) -&gt; Some @Type (ValueOf DefaultUni))
-&gt; PConstantRepr (PLifted p) -&gt; Some @Type (ValueOf DefaultUni)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted p -&gt; PConstantRepr (PLifted p)
forall h. PConstantDecl h =&gt; h -&gt; PConstantRepr h
</span><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-var">pconstantToRepr</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted p
</span><a href="#local-6989586621679755823"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-pragma">{-# HLINT ignore LiftError &quot;Use camelCase&quot; #-}</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="annot"><span class="hs-comment">{- | Error during script evaluation.

 @since 1.2.1
-}</span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">data</span><span> </span><span id="LiftError"><span class="annot"><a href="Plutarch.Lift.html#LiftError"><span class="hs-identifier hs-var">LiftError</span></a></span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="LiftError_EvalError"><span class="annot"><a href="Plutarch.Lift.html#LiftError_EvalError"><span class="hs-identifier hs-var">LiftError_EvalError</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.Evaluate.html#EvalError"><span class="hs-identifier hs-type">EvalError</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LiftError_KnownTypeError"><span class="annot"><a href="Plutarch.Lift.html#LiftError_KnownTypeError"><span class="hs-identifier hs-var">LiftError_KnownTypeError</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">KnownTypeError</span></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LiftError_FromRepr"><span class="annot"><a href="Plutarch.Lift.html#LiftError_FromRepr"><span class="hs-identifier hs-var">LiftError_FromRepr</span></a></span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LiftError_CompilationError"><span class="annot"><a href="Plutarch.Lift.html#LiftError_CompilationError"><span class="hs-identifier hs-var">LiftError_CompilationError</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679755830"><span id="local-6989586621679755840"><span class="annot"><span class="annottext">LiftError -&gt; LiftError -&gt; Bool
(LiftError -&gt; LiftError -&gt; Bool)
-&gt; (LiftError -&gt; LiftError -&gt; Bool) -&gt; Eq LiftError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LiftError -&gt; LiftError -&gt; Bool
== :: LiftError -&gt; LiftError -&gt; Bool
$c/= :: LiftError -&gt; LiftError -&gt; Bool
/= :: LiftError -&gt; LiftError -&gt; Bool
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">{- | Convert a Plutarch term to the associated Haskell value. Fail otherwise.
This will fully evaluate the arbitrary closed expression, and convert the resulting value.
-}</span></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Plutarch.Lift.html#plift%27"><span class="hs-identifier hs-type">plift'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679755649"><span class="annot"><a href="#local-6989586621679755649"><span class="hs-identifier hs-type">p</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PUnsafeLiftDecl"><span class="hs-identifier hs-type">PUnsafeLiftDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755649"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755649"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Plutarch.Lift.html#LiftError"><span class="hs-identifier hs-type">LiftError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755649"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span id="plift%27"><span class="annot"><span class="annottext">plift' :: forall (p :: PType).
PUnsafeLiftDecl p =&gt;
Config -&gt; ClosedTerm p -&gt; Either LiftError (PLifted p)
</span><a href="Plutarch.Lift.html#plift%27"><span class="hs-identifier hs-var hs-var">plift'</span></a></span></span><span> </span><span id="local-6989586621679755906"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679755906"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679755907"><span class="annot"><span class="annottext">ClosedTerm p
</span><a href="#local-6989586621679755907"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Config -&gt; ClosedTerm p -&gt; Either Text Script
forall (a :: PType). Config -&gt; ClosedTerm a -&gt; Either Text Script
</span><a href="Plutarch.Internal.html#compile"><span class="hs-identifier hs-var">compile</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679755906"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Term s p
ClosedTerm p
</span><a href="#local-6989586621679755907"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679755908"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679755908"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiftError -&gt; Either LiftError (PLifted p)
forall a b. a -&gt; Either a b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(LiftError -&gt; Either LiftError (PLifted p))
-&gt; LiftError -&gt; Either LiftError (PLifted p)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; LiftError
</span><a href="Plutarch.Lift.html#LiftError_CompilationError"><span class="hs-identifier hs-var">LiftError_CompilationError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679755908"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679755909"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679755909"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Script -&gt; (Either EvalError Script, ExBudget, [Text])
</span><a href="Plutarch.Internal.Evaluate.html#evalScriptHuge"><span class="hs-identifier hs-var">evalScriptHuge</span></a></span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679755909"><span class="hs-identifier hs-var">script</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Script -&gt; Program DeBruijn DefaultUni DefaultFun ()
</span><a href="Plutarch.Script.html#%24sel%3AunScript%3AScript"><span class="hs-identifier hs-var">unScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UPLC.Program</span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679755911"><span class="annot"><span class="annottext">Term DeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679755911"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-119"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term DeBruijn DefaultUni DefaultFun ()
-&gt; ReadKnownM (PConstantRepr (PLifted p))
forall val a. KnownBuiltinType val a =&gt; val -&gt; ReadKnownM a
</span><span class="hs-identifier hs-var">readKnownConstant</span></span><span> </span><span class="annot"><span class="annottext">Term DeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679755911"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-120"></span><span>        </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679755912"><span class="annot"><span class="annottext">PConstantRepr (PLifted p)
</span><a href="#local-6989586621679755912"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PConstantRepr (PLifted p) -&gt; Maybe (PLifted p)
forall h. PConstantDecl h =&gt; PConstantRepr h -&gt; Maybe h
</span><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-var">pconstantFromRepr</span></a></span><span> </span><span class="annot"><span class="annottext">PConstantRepr (PLifted p)
</span><a href="#local-6989586621679755912"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-121"></span><span>          </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679755913"><span class="annot"><span class="annottext">PLifted p
</span><a href="#local-6989586621679755913"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted p -&gt; Either LiftError (PLifted p)
forall a b. b -&gt; Either a b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">PLifted p
</span><a href="#local-6989586621679755913"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-122"></span><span>          </span><span class="annot"><span class="annottext">Maybe (PLifted p)
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiftError -&gt; Either LiftError (PLifted p)
forall a b. a -&gt; Either a b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">LiftError
</span><a href="Plutarch.Lift.html#LiftError_FromRepr"><span class="hs-identifier hs-var">LiftError_FromRepr</span></a></span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679755914"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621679755914"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiftError -&gt; Either LiftError (PLifted p)
forall a b. a -&gt; Either a b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(LiftError -&gt; Either LiftError (PLifted p))
-&gt; LiftError -&gt; Either LiftError (PLifted p)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError -&gt; LiftError
</span><a href="Plutarch.Lift.html#LiftError_KnownTypeError"><span class="hs-identifier hs-var">LiftError_KnownTypeError</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621679755914"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679755915"><span class="annot"><span class="annottext">EvalError
</span><a href="#local-6989586621679755915"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LiftError -&gt; Either LiftError (PLifted p)
forall a b. a -&gt; Either a b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(LiftError -&gt; Either LiftError (PLifted p))
-&gt; LiftError -&gt; Either LiftError (PLifted p)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EvalError -&gt; LiftError
</span><a href="Plutarch.Lift.html#LiftError_EvalError"><span class="hs-identifier hs-var">LiftError_EvalError</span></a></span><span> </span><span class="annot"><span class="annottext">EvalError
</span><a href="#local-6989586621679755915"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="annot"><span class="hs-comment">-- | Like `plift'` but throws on failure.</span></span><span>
</span><span id="line-127"></span><span class="annot"><a href="Plutarch.Lift.html#plift"><span class="hs-identifier hs-type">plift</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679755674"><span class="annot"><a href="#local-6989586621679755674"><span class="hs-identifier hs-type">p</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755674"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755674"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755674"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-128"></span><span id="plift"><span class="annot"><span class="annottext">plift :: forall (p :: PType).
(HasCallStack, PLift p) =&gt;
ClosedTerm p -&gt; PLifted p
</span><a href="Plutarch.Lift.html#plift"><span class="hs-identifier hs-var hs-var">plift</span></a></span></span><span> </span><span id="local-6989586621679756043"><span class="annot"><span class="annottext">ClosedTerm p
</span><a href="#local-6989586621679756043"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Config -&gt; ClosedTerm p -&gt; Either LiftError (PLifted p)
forall (p :: PType).
PUnsafeLiftDecl p =&gt;
Config -&gt; ClosedTerm p -&gt; Either LiftError (PLifted p)
</span><a href="Plutarch.Lift.html#plift%27"><span class="hs-identifier hs-var">plift'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:tracingMode:Config :: TracingMode
</span><a href="Plutarch.Internal.html#%24sel%3AtracingMode%3AConfig"><span class="hs-identifier hs-var">tracingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingMode
</span><a href="Plutarch.Internal.html#DoTracing"><span class="hs-identifier hs-var">DoTracing</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s p
ClosedTerm p
</span><a href="#local-6989586621679756043"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679756044"><span class="annot"><span class="annottext">PLifted p
</span><a href="#local-6989586621679756044"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PLifted p
</span><a href="#local-6989586621679756044"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">LiftError
</span><a href="Plutarch.Lift.html#LiftError_FromRepr"><span class="hs-identifier hs-var">LiftError_FromRepr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; PLifted p
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;plift failed: pconstantFromRepr returned 'Nothing'&quot;</span></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#LiftError_KnownTypeError"><span class="hs-identifier hs-type">LiftError_KnownTypeError</span></a></span><span> </span><span id="local-6989586621679756046"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621679756046"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679756047"><span class="annot"><span class="annottext">unliftErrMaybe :: Maybe Text
</span><a href="#local-6989586621679756047"><span class="hs-identifier hs-var hs-var">unliftErrMaybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621679756046"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
-&gt; Getting (First Text) KnownTypeError Text -&gt; Maybe Text
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><span class="hs-operator hs-var">^?</span></span><span> </span><span class="annot"><span class="annottext">Getting (First Text) KnownTypeError Text
forall r. AsUnliftingError r =&gt; Prism' r Text
Prism' KnownTypeError Text
</span><span class="hs-identifier hs-var">_UnliftingErrorE</span></span><span>
</span><span id="line-133"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; PLifted p
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; PLifted p) -&gt; [Char] -&gt; PLifted p
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-134"></span><span>          </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;plift failed: incorrect type: &quot;</span></span><span>
</span><span id="line-135"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; (Text -&gt; [Char]) -&gt; Maybe Text -&gt; [Char]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;absurd evaluation failure&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679756047"><span class="hs-identifier hs-var">unliftErrMaybe</span></a></span><span>
</span><span id="line-136"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#LiftError_EvalError"><span class="hs-identifier hs-type">LiftError_EvalError</span></a></span><span> </span><span id="local-6989586621679756050"><span class="annot"><span class="annottext">EvalError
</span><a href="#local-6989586621679756050"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; PLifted p
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; PLifted p) -&gt; [Char] -&gt; PLifted p
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;plift failed: erring term: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvalError -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">EvalError
</span><a href="#local-6989586621679756050"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#LiftError_CompilationError"><span class="hs-identifier hs-type">LiftError_CompilationError</span></a></span><span> </span><span id="local-6989586621679756051"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679756051"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; PLifted p
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; PLifted p) -&gt; [Char] -&gt; PLifted p
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;plift failed: compilation failed: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679756051"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">{- | Newtype wrapper for deriving @PConstant@ when the wrapped type is directly
represented by a builtin UPLC type that is /not/ @Data@.

  Ex: @PInteger@ is directly represented as a builtin integer.
-}</span></span><span>
</span><span id="line-144"></span><span class="hs-keyword">newtype</span><span> </span><span id="DerivePConstantDirect"><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantDirect"><span class="hs-identifier hs-var">DerivePConstantDirect</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679756052"><span class="annot"><a href="#local-6989586621679756052"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679756053"><span class="annot"><a href="#local-6989586621679756053"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DerivePConstantDirect"><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantDirect"><span class="hs-identifier hs-var">DerivePConstantDirect</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679756052"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-147"></span><span>  </span><span id="local-6989586621679755749"><span id="local-6989586621679755750"><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755749"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.DefaultUni</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">`Includes`</span></span><span> </span><span class="annot"><a href="#local-6989586621679755750"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier hs-type">PConstantDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantDirect"><span class="hs-identifier hs-type">DerivePConstantDirect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755750"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755749"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstantRepr"><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-var">PConstantRepr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantDirect"><span class="hs-identifier hs-type">DerivePConstantDirect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755750"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755749"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679755750"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstanted"><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-var">PConstanted</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantDirect"><span class="hs-identifier hs-type">DerivePConstantDirect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755750"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755749"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679755749"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span id="local-6989586621679756068"><span class="annot"><span class="annottext">pconstantToRepr :: DerivePConstantDirect h p
-&gt; PConstantRepr (DerivePConstantDirect h p)
</span><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">pconstantToRepr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DerivePConstantDirect h p
-&gt; PConstantRepr (DerivePConstantDirect h p)
forall a b. Coercible @Type a b =&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span>
</span><span id="line-153"></span><span>  </span><span id="local-6989586621679756071"><span class="annot"><span class="annottext">pconstantFromRepr :: PConstantRepr (DerivePConstantDirect h p)
-&gt; Maybe (DerivePConstantDirect h p)
</span><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">pconstantFromRepr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DerivePConstantDirect h p -&gt; Maybe (DerivePConstantDirect h p)
forall a. a -&gt; Maybe a
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(DerivePConstantDirect h p -&gt; Maybe (DerivePConstantDirect h p))
-&gt; (PConstantRepr (DerivePConstantDirect h p)
    -&gt; DerivePConstantDirect h p)
-&gt; PConstantRepr (DerivePConstantDirect h p)
-&gt; Maybe (DerivePConstantDirect h p)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PConstantRepr (DerivePConstantDirect h p)
-&gt; DerivePConstantDirect h p
forall a b. Coercible @Type a b =&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="annot"><span class="hs-comment">{- | Newtype wrapper for deriving @PConstant@ when the wrapped type is represented
indirectly by a builtin UPLC type that is /not/ @Data@.

  Ex: @PPubKeyHash@ is a newtype to a @PByteString@ and @PByteString@ is directly
  represented as a builtin bytestring.

Polymorphic types can be derived as follows:

&gt;newtype Foo a = Foo a
&gt;
&gt;newtype PFoo a s = PFoo (Term s a)
&gt;
&gt;instance forall a. PLift a =&gt; PUnsafeLiftDecl (PFoo a) where
&gt;  type PLifted (PFoo a) = Foo (PLifted a)
&gt;
&gt;deriving via
&gt;  ( DerivePConstantViaNewtype
&gt;      (Foo a)
&gt;      (PFoo (PConstanted a))
&gt;      (PConstanted a)
&gt;  )
&gt;  instance
&gt;    PConstant a =&gt;
&gt;    PConstantDecl (Foo a)
-}</span></span><span>
</span><span id="line-180"></span><span class="hs-keyword">newtype</span><span>
</span><span id="line-181"></span><span>  </span><span id="DerivePConstantViaNewtype"><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaNewtype"><span class="hs-identifier hs-var">DerivePConstantViaNewtype</span></a></span></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679756073"><span class="annot"><a href="#local-6989586621679756073"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679756074"><span class="annot"><a href="#local-6989586621679756074"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- PType to associate with the newtype</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679756075"><span class="annot"><a href="#local-6989586621679756075"><span class="hs-identifier hs-type">p'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Underlying UPLC representation type</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | The Haskell newtype we are deriving a @PConstant@ instance for</span></span><span>
</span><span id="line-186"></span><span>    </span><span id="DerivePConstantViaNewtype"><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaNewtype"><span class="hs-identifier hs-var">DerivePConstantViaNewtype</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679756073"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="annot"><span class="hs-comment">{- | Type synonym to simplify deriving of @PConstant@ via @DerivePConstantViaNewtype@.

A newtype @Foo a@ is considered &quot;Constantable&quot; if:

- The wrapped type @a@ has a @PConstant@ instance.
- The lifted type of @a@ has a @PUnsafeLiftDecl@ instance.
- There is type equality between @a@ and @PLifted (PConstanted a)@.

These constraints are sufficient to derive a @PConstant@ instance for the newtype.

For deriving @PConstant@ for a wrapped type represented in UPLC as @Data@, see
@DerivePConstantViaData@.
-}</span></span><span>
</span><span id="line-201"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstant"><span class="hs-identifier hs-type">PConstant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Constraint"><span class="hs-identifier hs-type">Constraint</span></a></span><span>
</span><span id="line-202"></span><span class="hs-keyword">type</span><span> </span><span id="PConstant"><span class="annot"><a href="Plutarch.Lift.html#PConstant"><span class="hs-identifier hs-var">PConstant</span></a></span></span><span> </span><span id="local-6989586621679756077"><span class="annot"><a href="#local-6989586621679756077"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679756077"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#~"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-type">PConstanted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679756077"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier hs-type">PConstantDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679756077"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679755758"><span id="local-6989586621679755759"><span id="local-6989586621679755760"><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755758"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Coercible"><span class="hs-identifier hs-type">Coercible</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755760"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier hs-type">PConstantDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaNewtype"><span class="hs-identifier hs-type">DerivePConstantViaNewtype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755760"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755758"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstantRepr"><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-var">PConstantRepr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaNewtype"><span class="hs-identifier hs-type">DerivePConstantViaNewtype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755760"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755758"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-type">PConstantRepr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstanted"><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-var">PConstanted</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaNewtype"><span class="hs-identifier hs-type">DerivePConstantViaNewtype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755760"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755758"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679755758"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span id="local-6989586621679756097"><span class="annot"><span class="annottext">pconstantToRepr :: DerivePConstantViaNewtype h p p'
-&gt; PConstantRepr (DerivePConstantViaNewtype h p p')
</span><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">pconstantToRepr</span></a></span></span><span> </span><span id="local-6989586621679756098"><span class="annot"><span class="annottext">DerivePConstantViaNewtype h p p'
</span><a href="#local-6989586621679756098"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall h. PConstantDecl h =&gt; h -&gt; PConstantRepr h
</span><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-var">pconstantToRepr</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PLifted p' -&gt; PConstantRepr (PLifted p'))
-&gt; PLifted p' -&gt; PConstantRepr (PLifted p')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DerivePConstantViaNewtype h p p' -&gt; PLifted p'
forall a b. Coercible @Type a b =&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">DerivePConstantViaNewtype h p p'
</span><a href="#local-6989586621679756098"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621679756101"><span class="annot"><span class="annottext">pconstantFromRepr :: PConstantRepr (DerivePConstantViaNewtype h p p')
-&gt; Maybe (DerivePConstantViaNewtype h p p')
</span><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">pconstantFromRepr</span></a></span></span><span> </span><span id="local-6989586621679756102"><span class="annot"><span class="annottext">PConstantRepr (DerivePConstantViaNewtype h p p')
</span><a href="#local-6989586621679756102"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (PLifted p') -&gt; Maybe (DerivePConstantViaNewtype h p p')
forall a b. Coercible @Type a b =&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (PLifted p') -&gt; Maybe (DerivePConstantViaNewtype h p p'))
-&gt; Maybe (PLifted p') -&gt; Maybe (DerivePConstantViaNewtype h p p')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall h. PConstantDecl h =&gt; PConstantRepr h -&gt; Maybe h
</span><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-var">pconstantFromRepr</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755759"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PConstantRepr (DerivePConstantViaNewtype h p p')
PConstantRepr (PLifted p')
</span><a href="#local-6989586621679756102"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">class</span><span> </span><span id="ToBuiltin%27"><span class="annot"><a href="Plutarch.Lift.html#ToBuiltin%27"><span class="hs-identifier hs-var">ToBuiltin'</span></a></span></span><span> </span><span id="local-6989586621679755765"><span class="annot"><a href="#local-6989586621679755765"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679755766"><span class="annot"><a href="#local-6989586621679755766"><span class="hs-identifier hs-type">arep</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621679755765"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679755766"><span class="hs-identifier hs-type">arep</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-211"></span><span>  </span><span id="toBuiltin%27"><span class="annot"><a href="Plutarch.Lift.html#toBuiltin%27"><span class="hs-identifier hs-type">toBuiltin'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679755765"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679755766"><span class="hs-identifier hs-type">arep</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-keyword">class</span><span> </span><span id="FromBuiltin%27"><span class="annot"><a href="Plutarch.Lift.html#FromBuiltin%27"><span class="hs-identifier hs-var">FromBuiltin'</span></a></span></span><span> </span><span id="local-6989586621679755773"><span class="annot"><a href="#local-6989586621679755773"><span class="hs-identifier hs-type">arep</span></a></span></span><span> </span><span id="local-6989586621679755774"><span class="annot"><a href="#local-6989586621679755774"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621679755773"><span class="hs-identifier hs-type">arep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679755774"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>  </span><span id="fromBuiltin%27"><span class="annot"><a href="Plutarch.Lift.html#fromBuiltin%27"><span class="hs-identifier hs-type">fromBuiltin'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679755773"><span class="hs-identifier hs-type">arep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679755774"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- FIXME this overlappable instance is nonsense and disregards the fundep</span><span>
</span><span id="line-217"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679755767"><span id="local-6989586621679755768"><span class="annot"><span class="hs-identifier hs-type">ToBuiltin</span></span><span> </span><span class="annot"><a href="#local-6989586621679755767"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755768"><span class="hs-identifier hs-type">arep</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#ToBuiltin%27"><span class="hs-identifier hs-type">ToBuiltin'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755767"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755768"><span class="hs-identifier hs-type">arep</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621679756110"><span class="annot"><span class="annottext">toBuiltin' :: a -&gt; arep
</span><a href="Plutarch.Lift.html#toBuiltin%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">toBuiltin'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; arep
forall a arep. ToBuiltin a arep =&gt; a -&gt; arep
</span><span class="hs-identifier hs-var">toBuiltin</span></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679755775"><span id="local-6989586621679755776"><span class="annot"><span class="hs-identifier hs-type">FromBuiltin</span></span><span> </span><span class="annot"><a href="#local-6989586621679755775"><span class="hs-identifier hs-type">arep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755776"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#FromBuiltin%27"><span class="hs-identifier hs-type">FromBuiltin'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755775"><span class="hs-identifier hs-type">arep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755776"><span class="hs-identifier hs-type">a</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>  </span><span id="local-6989586621679756116"><span class="annot"><span class="annottext">fromBuiltin' :: arep -&gt; a
</span><a href="Plutarch.Lift.html#fromBuiltin%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromBuiltin'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">arep -&gt; a
forall arep a. FromBuiltin arep a =&gt; arep -&gt; a
</span><span class="hs-identifier hs-var">fromBuiltin</span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#ToBuiltin%27"><span class="hs-identifier hs-type">ToBuiltin'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuiltinData</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>  </span><span id="local-6989586621679756119"><span class="annot"><span class="annottext">toBuiltin' :: Data -&gt; BuiltinData
</span><a href="Plutarch.Lift.html#toBuiltin%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">toBuiltin'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Data -&gt; BuiltinData
</span><span class="hs-identifier hs-var">dataToBuiltinData</span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#FromBuiltin%27"><span class="hs-identifier hs-type">FromBuiltin'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuiltinData</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>  </span><span id="local-6989586621679756122"><span class="annot"><span class="annottext">fromBuiltin' :: BuiltinData -&gt; Data
</span><a href="Plutarch.Lift.html#fromBuiltin%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromBuiltin'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Data
</span><span class="hs-identifier hs-var">builtinDataToData</span></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-keyword">newtype</span><span> </span><span id="DerivePConstantViaBuiltin"><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaBuiltin"><span class="hs-identifier hs-var">DerivePConstantViaBuiltin</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679756123"><span class="annot"><a href="#local-6989586621679756123"><span class="hs-identifier hs-type">h</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679756124"><span class="annot"><a href="#local-6989586621679756124"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679756125"><span class="annot"><a href="#local-6989586621679756125"><span class="hs-identifier hs-type">p'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DerivePConstantViaBuiltin"><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaBuiltin"><span class="hs-identifier hs-var">DerivePConstantViaBuiltin</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679756123"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-232"></span><span>  </span><span id="local-6989586621679755783"><span id="local-6989586621679755784"><span id="local-6989586621679755785"><span id="local-6989586621679755786"><span class="hs-special">(</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755783"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PLift"><span class="hs-identifier hs-type">PLift</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Coercible"><span class="hs-identifier hs-type">Coercible</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755785"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755786"><span class="hs-identifier hs-type">h'</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#ToBuiltin%27"><span class="hs-identifier hs-type">ToBuiltin'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679755786"><span class="hs-identifier hs-type">h'</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#FromBuiltin%27"><span class="hs-identifier hs-type">FromBuiltin'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755786"><span class="hs-identifier hs-type">h'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><a href="Plutarch.Lift.html#PConstantDecl"><span class="hs-identifier hs-type">PConstantDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaBuiltin"><span class="hs-identifier hs-type">DerivePConstantViaBuiltin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755785"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755783"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstantRepr"><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-var">PConstantRepr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaBuiltin"><span class="hs-identifier hs-type">DerivePConstantViaBuiltin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755785"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755783"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Lift.html#PConstantRepr"><span class="hs-identifier hs-type">PConstantRepr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PConstanted"><span class="annot"><a href="Plutarch.Lift.html#PConstanted"><span class="hs-identifier hs-var">PConstanted</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#DerivePConstantViaBuiltin"><span class="hs-identifier hs-type">DerivePConstantViaBuiltin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755785"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755783"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679755783"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621679756148"><span class="annot"><span class="annottext">pconstantToRepr :: DerivePConstantViaBuiltin h p p'
-&gt; PConstantRepr (DerivePConstantViaBuiltin h p p')
</span><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">pconstantToRepr</span></a></span></span><span> </span><span id="local-6989586621679756149"><span class="annot"><span class="annottext">DerivePConstantViaBuiltin h p p'
</span><a href="#local-6989586621679756149"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall h. PConstantDecl h =&gt; h -&gt; PConstantRepr h
</span><a href="Plutarch.Lift.html#pconstantToRepr"><span class="hs-identifier hs-var">pconstantToRepr</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PLifted p' -&gt; PConstantRepr (PLifted p'))
-&gt; PLifted p' -&gt; PConstantRepr (PLifted p')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">h' -&gt; PLifted p'
forall arep a. FromBuiltin' arep a =&gt; arep -&gt; a
</span><a href="Plutarch.Lift.html#fromBuiltin%27"><span class="hs-identifier hs-var">fromBuiltin'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DerivePConstantViaBuiltin h p p' -&gt; h'
forall a b. Coercible @Type a b =&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">DerivePConstantViaBuiltin h p p'
</span><a href="#local-6989586621679756149"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679755786"><span class="hs-identifier hs-type">h'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621679756155"><span class="annot"><span class="annottext">pconstantFromRepr :: PConstantRepr (DerivePConstantViaBuiltin h p p')
-&gt; Maybe (DerivePConstantViaBuiltin h p p')
</span><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-var hs-var hs-var hs-var">pconstantFromRepr</span></a></span></span><span> </span><span id="local-6989586621679756156"><span class="annot"><span class="annottext">PConstantRepr (DerivePConstantViaBuiltin h p p')
</span><a href="#local-6989586621679756156"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe h' -&gt; Maybe (DerivePConstantViaBuiltin h p p')
forall a b. Coercible @Type a b =&gt; a -&gt; b
</span><a href="../../../ghc-9.6.4/html/libraries/ghc-prim-0.10.0/src/GHC.Prim.html#coerce"><span class="hs-identifier hs-var">coerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PLifted p' -&gt; h'
forall a arep. ToBuiltin' a arep =&gt; a -&gt; arep
</span><a href="Plutarch.Lift.html#toBuiltin%27"><span class="hs-identifier hs-var">toBuiltin'</span></a></span><span> </span><span class="annot"><span class="annottext">(PLifted p' -&gt; h') -&gt; Maybe (PLifted p') -&gt; Maybe h'
forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall h. PConstantDecl h =&gt; PConstantRepr h -&gt; Maybe h
</span><a href="Plutarch.Lift.html#pconstantFromRepr"><span class="hs-identifier hs-var">pconstantFromRepr</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Lift.html#PLifted"><span class="hs-identifier hs-type">PLifted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755784"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PConstantRepr (DerivePConstantViaBuiltin h p p')
PConstantRepr (PLifted p')
</span><a href="#local-6989586621679756156"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../ghc-9.6.4/html/libraries/base-4.18.2.0/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679755786"><span class="hs-identifier hs-type">h'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span></pre></body></html>